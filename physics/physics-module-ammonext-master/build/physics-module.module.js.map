{"version":3,"file":"physics-module.module.js.map","sources":["../src/api.js","../src/eventable.js","../src/constraints/ConeTwistConstraint.js","../src/constraints/HingeConstraint.js","../src/constraints/PointConstraint.js","../src/constraints/SliderConstraint.js","../src/constraints/DOFConstraint.js","../src/vehicle/vehicle.js","../src/modules/core/WorldModuleBase.js","../bundle-worker/workerhelper.js","../src/worker.js","../src/modules/WorldModule.js","../src/modules/core/PhysicsModule.js","../src/modules/BoxModule.js","../src/modules/CompoundModule.js","../src/modules/CapsuleModule.js","../src/modules/ConcaveModule.js","../src/modules/ConeModule.js","../src/modules/ConvexModule.js","../src/modules/CylinderModule.js","../src/modules/HeightfieldModule.js","../src/modules/PlaneModule.js","../src/modules/SphereModule.js","../src/modules/SoftbodyModule.js","../src/modules/ClothModule.js","../src/modules/RopeModule.js","../src/modules/controls/FirstPersonModule.js"],"sourcesContent":["import {\n  Vector3,\n  Matrix4,\n  Quaternion\n} from 'three';\n\nconst MESSAGE_TYPES = {\n  WORLDREPORT: 0,\n  COLLISIONREPORT: 1,\n  VEHICLEREPORT: 2,\n  CONSTRAINTREPORT: 3,\n  SOFTREPORT: 4\n};\n\nconst REPORT_ITEMSIZE = 14,\n  COLLISIONREPORT_ITEMSIZE = 5,\n  VEHICLEREPORT_ITEMSIZE = 9,\n  CONSTRAINTREPORT_ITEMSIZE = 6;\n\nconst temp1Vector3 = new Vector3(),\n  temp2Vector3 = new Vector3(),\n  temp1Matrix4 = new Matrix4(),\n  temp1Quat = new Quaternion();\n\nconst getEulerXYZFromQuaternion = (x, y, z, w) => {\n  return new Vector3(\n    Math.atan2(2 * (x * w - y * z), (w * w - x * x - y * y + z * z)),\n    Math.asin(2 * (x * z + y * w)),\n    Math.atan2(2 * (z * w - x * y), (w * w + x * x - y * y - z * z))\n  );\n};\n\nconst getQuatertionFromEuler = (x, y, z) => {\n  const c1 = Math.cos(y);\n  const s1 = Math.sin(y);\n  const c2 = Math.cos(-z);\n  const s2 = Math.sin(-z);\n  const c3 = Math.cos(x);\n  const s3 = Math.sin(x);\n  const c1c2 = c1 * c2;\n  const s1s2 = s1 * s2;\n\n  return {\n    w: c1c2 * c3 - s1s2 * s3,\n    x: c1c2 * s3 + s1s2 * c3,\n    y: s1 * c2 * c3 + c1 * s2 * s3,\n    z: c1 * s2 * c3 - s1 * c2 * s3\n  };\n};\n\nconst convertWorldPositionToObject = (position, object) => {\n  temp1Matrix4.identity(); // reset temp matrix\n\n  // Set the temp matrix's rotation to the object's rotation\n  temp1Matrix4.identity().makeRotationFromQuaternion(object.quaternion);\n\n  // Invert rotation matrix in order to \"unrotate\" a point back to object space\n  temp1Matrix4.getInverse(temp1Matrix4);\n\n  // Yay! Temp vars!\n  temp1Vector3.copy(position);\n  temp2Vector3.copy(object.position);\n\n  // Apply the rotation\n  return temp1Vector3.sub(temp2Vector3).applyMatrix4(temp1Matrix4);\n};\n\nconst addObjectChildren = function (parent, object) {\n  for (let i = 0; i < object.children.length; i++) {\n    const child = object.children[i];\n    const physics = child.component ? child.component.use('physics') : false;\n\n    if (physics) {\n      const data = physics.data;\n\n      child.updateMatrix();\n      child.updateMatrixWorld();\n\n      temp1Vector3.setFromMatrixPosition(child.matrixWorld);\n      temp1Quat.setFromRotationMatrix(child.matrixWorld);\n\n      data.position_offset = {\n        x: temp1Vector3.x,\n        y: temp1Vector3.y,\n        z: temp1Vector3.z\n      };\n\n      data.rotation = {\n        x: temp1Quat.x,\n        y: temp1Quat.y,\n        z: temp1Quat.z,\n        w: temp1Quat.w\n      };\n\n      parent.component.use('physics').data.children.push(data);\n    }\n\n    addObjectChildren(parent, child);\n  }\n};\n\nexport {\n  getEulerXYZFromQuaternion,\n  getQuatertionFromEuler,\n  convertWorldPositionToObject,\n  addObjectChildren,\n\n  MESSAGE_TYPES,\n  REPORT_ITEMSIZE,\n  COLLISIONREPORT_ITEMSIZE,\n  VEHICLEREPORT_ITEMSIZE,\n  CONSTRAINTREPORT_ITEMSIZE,\n\n  temp1Vector3,\n  temp2Vector3,\n  temp1Matrix4,\n  temp1Quat\n};\n","export class Eventable {\n  constructor() {\n    this._eventListeners = {};\n  }\n\n  addEventListener(event_name, callback) {\n    if (!this._eventListeners.hasOwnProperty(event_name))\n      this._eventListeners[event_name] = [];\n\n    this._eventListeners[event_name].push(callback);\n  }\n\n  removeEventListener(event_name, callback) {\n    let index;\n\n    if (!this._eventListeners.hasOwnProperty(event_name)) return false;\n\n    if ((index = this._eventListeners[event_name].indexOf(callback)) >= 0) {\n      this._eventListeners[event_name].splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  dispatchEvent(event_name) {\n    let i;\n    const parameters = Array.prototype.splice.call(arguments, 1);\n\n    if (this._eventListeners.hasOwnProperty(event_name)) {\n      for (i = 0; i < this._eventListeners[event_name].length; i++)\n        this._eventListeners[event_name][i].apply(this, parameters);\n    }\n  }\n\n  static make(obj) {\n    obj.prototype.addEventListener = Eventable.prototype.addEventListener;\n    obj.prototype.removeEventListener = Eventable.prototype.removeEventListener;\n    obj.prototype.dispatchEvent = Eventable.prototype.dispatchEvent;\n  }\n}\n","import {convertWorldPositionToObject} from '../api';\n\nexport class ConeTwistConstraint {\n  constructor(obja, objb, position) {\n    const objecta = obja;\n    const objectb = obja;\n\n    if (position === undefined) console.error('Both objects must be defined in a ConeTwistConstraint.');\n\n    this.type = 'conetwist';\n    this.appliedImpulse = 0;\n    this.worldModule = null; // Will be redefined by .addConstraint\n    this.objecta = objecta.use('physics').data.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n    this.objectb = objectb.use('physics').data.id;\n    this.positionb = convertWorldPositionToObject(position, objectb).clone();\n    this.axisa = {x: objecta.rotation.x, y: objecta.rotation.y, z: objecta.rotation.z};\n    this.axisb = {x: objectb.rotation.x, y: objectb.rotation.y, z: objectb.rotation.z};\n  }\n\n  getDefinition() {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb,\n      axisa: this.axisa,\n      axisb: this.axisb\n    };\n  }\n\n  setLimit(x, y, z) {\n    if(this.worldModule) this.worldModule.execute('conetwist_setLimit', {constraint: this.id, x, y, z});\n  }\n\n  enableMotor() {\n    if(this.worldModule) this.worldModule.execute('conetwist_enableMotor', {constraint: this.id});\n  }\n\n  setMaxMotorImpulse(max_impulse) {\n    if(this.worldModule) this.worldModule.execute('conetwist_setMaxMotorImpulse', {constraint: this.id, max_impulse});\n  }\n\n  setMotorTarget(target) {\n    if (target instanceof THREE.Vector3)\n      target = new THREE.Quaternion().setFromEuler(new THREE.Euler(target.x, target.y, target.z));\n    else if (target instanceof THREE.Euler)\n      target = new THREE.Quaternion().setFromEuler(target);\n    else if (target instanceof THREE.Matrix4)\n      target = new THREE.Quaternion().setFromRotationMatrix(target);\n\n    if(this.worldModule) this.worldModule.execute('conetwist_setMotorTarget', {\n      constraint: this.id,\n      x: target.x,\n      y: target.y,\n      z: target.z,\n      w: target.w\n    });\n  }\n}\n","import {convertWorldPositionToObject} from '../api';\n\nexport class HingeConstraint {\n  constructor(obja, objb, position, axis) {\n    const objecta = obja;\n    let objectb = objb;\n\n    if (axis === undefined) {\n      axis = position;\n      position = objectb;\n      objectb = undefined;\n    }\n\n    this.type = 'hinge';\n    this.appliedImpulse = 0;\n    this.worldModule = null; // Will be redefined by .addConstraint\n    this.objecta = objecta.use('physics').data.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n    this.position = position.clone();\n    this.axis = axis;\n\n    if (objectb) {\n      this.objectb = objectb.use('physics').data.id;\n      this.positionb = convertWorldPositionToObject(position, objectb).clone();\n    }\n  }\n\n  getDefinition() {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb,\n      axis: this.axis\n    };\n  }\n\n  setLimits(low, high, bias_factor, relaxation_factor) {\n    if (this.worldModule) this.worldModule.execute('hinge_setLimits', {\n      constraint: this.id,\n      low,\n      high,\n      bias_factor,\n      relaxation_factor\n    });\n  }\n\n  enableAngularMotor(velocity, acceleration) {\n    if (this.worldModule) this.worldModule.execute('hinge_enableAngularMotor', {\n      constraint: this.id,\n      velocity,\n      acceleration\n    });\n  }\n\n  disableMotor() {\n    if (this.worldModule) this.worldModule.execute('hinge_disableMotor', {constraint: this.id});\n  }\n}\n","import {convertWorldPositionToObject} from '../api';\n\nexport class PointConstraint {\n  constructor(obja, objb, position) {\n    const objecta = obja;\n    let objectb = objb;\n\n    if (position === undefined) {\n      position = objectb;\n      objectb = undefined;\n    }\n\n    this.type = 'point';\n    this.appliedImpulse = 0;\n    this.objecta = objecta.use('physics').data.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n\n    if (objectb) {\n      this.objectb = objectb.use('physics').data.id;\n      this.positionb = convertWorldPositionToObject(position, objectb).clone();\n    }\n  }\n\n  getDefinition() {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb\n    };\n  }\n}\n","import {convertWorldPositionToObject} from '../api';\n\nexport class SliderConstraint {\n  constructor(obja, objb, position, axis) {\n    const objecta = obja;\n    let objectb = objb;\n\n    if (axis === undefined) {\n      axis = position;\n      position = objectb;\n      objectb = undefined;\n    }\n\n    this.type = 'slider';\n    this.appliedImpulse = 0;\n    this.worldModule = null; // Will be redefined by .addConstraint\n    this.objecta = objecta.use('physics').data.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n    this.axis = axis;\n\n    if (objectb) {\n      this.objectb = objectb.use('physics').data.id;\n      this.positionb = convertWorldPositionToObject(position, objectb).clone();\n    }\n  }\n\n  getDefinition() {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb,\n      axis: this.axis\n    };\n  }\n\n  setLimits(lin_lower, lin_upper, ang_lower, ang_upper) {\n    if (this.worldModule) this.worldModule.execute('slider_setLimits', {\n      constraint: this.id,\n      lin_lower,\n      lin_upper,\n      ang_lower,\n      ang_upper\n    });\n  }\n\n  setRestitution(linear, angular) {\n    if (this.worldModule) this.worldModule.execute(\n      'slider_setRestitution',\n      {\n        constraint: this.id,\n        linear,\n        angular\n      }\n    );\n  }\n\n  enableLinearMotor(velocity, acceleration) {\n    if (this.worldModule) this.worldModule.execute('slider_enableLinearMotor', {\n      constraint: this.id,\n      velocity,\n      acceleration\n    });\n  }\n\n  disableLinearMotor() {\n    if (this.worldModule) this.worldModule.execute('slider_disableLinearMotor', {constraint: this.id});\n  }\n\n  enableAngularMotor(velocity, acceleration) {\n    this.scene.execute('slider_enableAngularMotor', {\n      constraint: this.id,\n      velocity,\n      acceleration\n    });\n  }\n\n  disableAngularMotor() {\n    if (this.worldModule) this.worldModule.execute('slider_disableAngularMotor', {constraint: this.id});\n  }\n}\n","import {convertWorldPositionToObject} from '../api';\n\nexport class DOFConstraint {\n  constructor(obja, objb, position) {\n    const objecta = obja;\n    let objectb = objb;\n\n    if ( position === undefined ) {\n      position = objectb;\n      objectb = undefined;\n    }\n\n    this.type = 'dof';\n    this.appliedImpulse = 0;\n    this.worldModule = null; // Will be redefined by .addConstraint\n    this.objecta = objecta.use('physics').data.id;\n    this.positiona = convertWorldPositionToObject( position, objecta ).clone();\n    this.axisa = { x: objecta.rotation.x, y: objecta.rotation.y, z: objecta.rotation.z };\n\n    if ( objectb ) {\n      this.objectb = objectb.use('physics').data.id;\n      this.positionb = convertWorldPositionToObject( position, objectb ).clone();\n      this.axisb = { x: objectb.rotation.x, y: objectb.rotation.y, z: objectb.rotation.z };\n    }\n  }\n\n  getDefinition() {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb,\n      axisa: this.axisa,\n      axisb: this.axisb\n    };\n  }\n\n  setLinearLowerLimit(limit) {\n    if (this.worldModule) this.worldModule.execute( 'dof_setLinearLowerLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z } );\n  }\n\n  setLinearUpperLimit (limit) {\n    if (this.worldModule) this.worldModule.execute( 'dof_setLinearUpperLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z } );\n  }\n\n  setAngularLowerLimit (limit) {\n    if (this.worldModule) this.worldModule.execute( 'dof_setAngularLowerLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z } );\n  }\n\n  setAngularUpperLimit (limit) {\n    if (this.worldModule) this.worldModule.execute( 'dof_setAngularUpperLimit', { constraint: this.id, x: limit.x, y: limit.y, z: limit.z } );\n  }\n\n  enableAngularMotor (which) {\n    if (this.worldModule) this.worldModule.execute( 'dof_enableAngularMotor', { constraint: this.id, which: which } );\n  }\n\n  configureAngularMotor (which, low_angle, high_angle, velocity, max_force ) {\n    if (this.worldModule) this.worldModule.execute( 'dof_configureAngularMotor', { constraint: this.id, which: which, low_angle: low_angle, high_angle: high_angle, velocity: velocity, max_force: max_force } );\n  }\n\n  disableAngularMotor (which) {\n    if (this.worldModule) this.worldModule.execute( 'dof_disableAngularMotor', { constraint: this.id, which: which } );\n  }\n}\n","import {Mesh} from 'three';\nimport {VehicleTunning} from './tunning';\n\nexport class Vehicle {\n  constructor(mesh, tuning = new VehicleTuning()) {\n    this.mesh = mesh;\n    this.wheels = [];\n\n    this._physijs = {\n      id: getObjectId(),\n      rigidBody: mesh._physijs.id,\n      suspension_stiffness: tuning.suspension_stiffness,\n      suspension_compression: tuning.suspension_compression,\n      suspension_damping: tuning.suspension_damping,\n      max_suspension_travel: tuning.max_suspension_travel,\n      friction_slip: tuning.friction_slip,\n      max_suspension_force: tuning.max_suspension_force\n    };\n  }\n\n  addWheel(wheel_geometry, wheel_material, connection_point, wheel_direction, wheel_axle, suspension_rest_length, wheel_radius, is_front_wheel, tuning) {\n    const wheel = new Mesh(wheel_geometry, wheel_material);\n\n    wheel.castShadow = wheel.receiveShadow = true;\n    wheel.position.copy(wheel_direction).multiplyScalar(suspension_rest_length / 100).add(connection_point);\n\n    this.world.add(wheel);\n    this.wheels.push(wheel);\n\n    this.world.execute('addWheel', {\n      id: this._physijs.id,\n      connection_point: {x: connection_point.x, y: connection_point.y, z: connection_point.z},\n      wheel_direction: {x: wheel_direction.x, y: wheel_direction.y, z: wheel_direction.z},\n      wheel_axle: {x: wheel_axle.x, y: wheel_axle.y, z: wheel_axle.z},\n      suspension_rest_length,\n      wheel_radius,\n      is_front_wheel,\n      tuning\n    });\n  }\n\n  setSteering(amount, wheel) {\n    if (wheel !== undefined && this.wheels[wheel] !== undefined)\n      this.world.execute('setSteering', {id: this._physijs.id, wheel, steering: amount});\n    else if (this.wheels.length > 0) {\n      for (let i = 0; i < this.wheels.length; i++)\n        this.world.execute('setSteering', {id: this._physijs.id, wheel: i, steering: amount});\n    }\n  }\n\n  setBrake(amount, wheel) {\n    if (wheel !== undefined && this.wheels[wheel] !== undefined)\n      this.world.execute('setBrake', {id: this._physijs.id, wheel, brake: amount});\n    else if (this.wheels.length > 0) {\n      for (let i = 0; i < this.wheels.length; i++)\n        this.world.execute('setBrake', {id: this._physijs.id, wheel: i, brake: amount});\n    }\n  }\n\n  applyEngineForce(amount, wheel) {\n    if (wheel !== undefined && this.wheels[wheel] !== undefined)\n      this.world.execute('applyEngineForce', {id: this._physijs.id, wheel, force: amount});\n    else if (this.wheels.length > 0) {\n      for (let i = 0; i < this.wheels.length; i++)\n        this.world.execute('applyEngineForce', {id: this._physijs.id, wheel: i, force: amount});\n    }\n  }\n}\n","import {\n  Scene as SceneNative,\n  Mesh,\n  SphereGeometry,\n  MeshNormalMaterial,\n  BoxGeometry,\n  Vector3\n} from 'three';\n\nimport {Loop} from 'whs';\n\nimport {Vehicle} from '../../vehicle/vehicle';\nimport {Eventable} from '../../eventable';\n\nimport {\n  addObjectChildren,\n  MESSAGE_TYPES,\n  temp1Vector3,\n  temp1Matrix4,\n  REPORT_ITEMSIZE,\n  COLLISIONREPORT_ITEMSIZE,\n  VEHICLEREPORT_ITEMSIZE,\n  CONSTRAINTREPORT_ITEMSIZE\n} from '../../api';\n\nexport default class WorldModuleBase extends Eventable {\n  static defaults = {\n    fixedTimeStep: 1/60,\n    rateLimit: true,\n    ammo: \"\",\n    softbody: false,\n    gravity: new Vector3(0, -100, 0)\n  };\n\n  constructor(options) {\n    super();\n\n    this.options = Object.assign(WorldModuleBase.defaults, options);\n\n    this.objects = {};\n    this.vehicles = {};\n    this.constraints = {};\n    this.isSimulating = false;\n\n    this.getObjectId = (() => {\n      let id = 1;\n      return () => {\n        return id++;\n      };\n    })();\n  }\n\n  setup() {\n    this.receive(event => {\n      let _temp,\n        data = event.data;\n\n      if (data instanceof ArrayBuffer && data.byteLength !== 1)// byteLength === 1 is the worker making a SUPPORT_TRANSFERABLE test\n        data = new Float32Array(data);\n\n      if (data instanceof Float32Array) {\n        // transferable object\n        switch (data[0]) {\n          case MESSAGE_TYPES.WORLDREPORT:\n            this.updateScene(data);\n            break;\n\n          case MESSAGE_TYPES.SOFTREPORT:\n            this.updateSoftbodies(data);\n            break;\n\n          case MESSAGE_TYPES.COLLISIONREPORT:\n            this.updateCollisions(data);\n            break;\n\n          case MESSAGE_TYPES.VEHICLEREPORT:\n            this.updateVehicles(data);\n            break;\n\n          case MESSAGE_TYPES.CONSTRAINTREPORT:\n            this.updateConstraints(data);\n            break;\n          default:\n        }\n      } else if (data.cmd) {\n        // non-transferable object\n        switch (data.cmd) {\n          case 'objectReady':\n            _temp = data.params;\n            if (this.objects[_temp]) this.objects[_temp].dispatchEvent('ready');\n            break;\n\n          case 'worldReady':\n            this.dispatchEvent('ready');\n            break;\n\n          case 'ammoLoaded':\n            this.dispatchEvent('loaded');\n            // console.log(\"Physics loading time: \" + (performance.now() - start) + \"ms\");\n            break;\n\n          case 'vehicle':\n            window.test = data;\n            break;\n\n          default:\n            // Do nothing, just show the message\n            console.debug(`Received: ${data.cmd}`);\n            console.dir(data.params);\n            break;\n        }\n      } else {\n        switch (data[0]) {\n          case MESSAGE_TYPES.WORLDREPORT:\n            this.updateScene(data);\n            break;\n\n          case MESSAGE_TYPES.COLLISIONREPORT:\n            this.updateCollisions(data);\n            break;\n\n          case MESSAGE_TYPES.VEHICLEREPORT:\n            this.updateVehicles(data);\n            break;\n\n          case MESSAGE_TYPES.CONSTRAINTREPORT:\n            this.updateConstraints(data);\n            break;\n          default:\n        }\n      }\n    });\n  }\n\n  updateScene(info) {\n    let index = info[1];\n\n    while (index--) {\n      const offset = 2 + index * REPORT_ITEMSIZE;\n      const object = this.objects[info[offset]];\n      const component = object.component;\n      const data = component.use('physics').data;\n\n      if (object === null) continue;\n\n      if (component.__dirtyPosition === false) {\n        object.position.set(\n          info[offset + 1],\n          info[offset + 2],\n          info[offset + 3]\n        );\n\n        component.__dirtyPosition = false;\n      }\n\n      if (component.__dirtyRotation === false) {\n        object.quaternion.set(\n          info[offset + 4],\n          info[offset + 5],\n          info[offset + 6],\n          info[offset + 7]\n        );\n\n        component.__dirtyRotation = false;\n      }\n\n      data.linearVelocity.set(\n        info[offset + 8],\n        info[offset + 9],\n        info[offset + 10]\n      );\n\n      data.angularVelocity.set(\n        info[offset + 11],\n        info[offset + 12],\n        info[offset + 13]\n      );\n    }\n\n    if (this.SUPPORT_TRANSFERABLE)\n      this.send(info.buffer, [info.buffer]); // Give the typed array back to the worker\n\n    this.isSimulating = false;\n    this.dispatchEvent('update');\n  }\n\n  updateSoftbodies(info) {\n    let index = info[1],\n      offset = 2;\n\n    while (index--) {\n      const size = info[offset + 1];\n      const object = this.objects[info[offset]];\n\n      if (object === null) continue;\n\n      const data = object.component.use('physics').data;\n\n      const attributes = object.geometry.attributes;\n      const volumePositions = attributes.position.array;\n\n      const offsetVert = offset + 2;\n\n      // console.log(data.id);\n      if (!data.isSoftBodyReset) {\n        object.position.set(0, 0, 0);\n        object.quaternion.set(0, 0, 0, 0);\n\n        data.isSoftBodyReset = true;\n      }\n\n      if (data.type === \"softTrimesh\") {\n        const volumeNormals = attributes.normal.array;\n\n        for (let i = 0; i < size; i++) {\n          const offs = offsetVert + i * 18;\n\n          const x1 = info[offs];\n          const y1 = info[offs + 1];\n          const z1 = info[offs + 2];\n\n          const nx1 = info[offs + 3];\n          const ny1 = info[offs + 4];\n          const nz1 = info[offs + 5];\n\n          const x2 = info[offs + 6];\n          const y2 = info[offs + 7];\n          const z2 = info[offs + 8];\n\n          const nx2 = info[offs + 9];\n          const ny2 = info[offs + 10];\n          const nz2 = info[offs + 11];\n\n          const x3 = info[offs + 12];\n          const y3 = info[offs + 13];\n          const z3 = info[offs + 14];\n\n          const nx3 = info[offs + 15];\n          const ny3 = info[offs + 16];\n          const nz3 = info[offs + 17];\n\n          const i9 = i * 9;\n\n          volumePositions[i9] = x1;\n          volumePositions[i9 + 1] = y1;\n          volumePositions[i9 + 2] = z1;\n\n          volumePositions[i9 + 3] = x2;\n          volumePositions[i9 + 4] = y2;\n          volumePositions[i9 + 5] = z2;\n\n          volumePositions[i9 + 6] = x3;\n          volumePositions[i9 + 7] = y3;\n          volumePositions[i9 + 8] = z3;\n\n          volumeNormals[i9] = nx1;\n          volumeNormals[i9 + 1] = ny1;\n          volumeNormals[i9 + 2] = nz1;\n\n          volumeNormals[i9 + 3] = nx2;\n          volumeNormals[i9 + 4] = ny2;\n          volumeNormals[i9 + 5] = nz2;\n\n          volumeNormals[i9 + 6] = nx3;\n          volumeNormals[i9 + 7] = ny3;\n          volumeNormals[i9 + 8] = nz3;\n        }\n\n        attributes.normal.needsUpdate = true;\n        offset += 2 + size * 18;\n      }\n      else if (data.type === \"softRopeMesh\") {\n        for (let i = 0; i < size; i++) {\n          const offs = offsetVert + i * 3;\n\n          const x = info[offs];\n          const y = info[offs + 1];\n          const z = info[offs + 2];\n\n          volumePositions[i * 3] = x;\n          volumePositions[i * 3 + 1] = y;\n          volumePositions[i * 3 + 2] = z;\n        }\n\n        offset += 2 + size * 3;\n      } else {\n        const volumeNormals = attributes.normal.array;\n\n        for (let i = 0; i < size; i++) {\n          const offs = offsetVert + i * 6;\n\n          const x = info[offs];\n          const y = info[offs + 1];\n          const z = info[offs + 2];\n\n          const nx = info[offs + 3];\n          const ny = info[offs + 4];\n          const nz = info[offs + 5];\n\n          volumePositions[i * 3] = x;\n          volumePositions[i * 3 + 1] = y;\n          volumePositions[i * 3 + 2] = z;\n\n          // FIXME: Normals are pointed to look inside;\n          volumeNormals[i * 3] = nx;\n          volumeNormals[i * 3 + 1] = ny;\n          volumeNormals[i * 3 + 2] = nz;\n        }\n\n        attributes.normal.needsUpdate = true;\n        offset += 2 + size * 6;\n      }\n\n      attributes.position.needsUpdate = true;\n    }\n\n    // if (this.SUPPORT_TRANSFERABLE)\n    //   this.send(info.buffer, [info.buffer]); // Give the typed array back to the worker\n\n    this.isSimulating = false;\n  }\n\n  updateVehicles(data) {\n    let vehicle, wheel;\n\n    for (let i = 0; i < (data.length - 1) / VEHICLEREPORT_ITEMSIZE; i++) {\n      const offset = 1 + i * VEHICLEREPORT_ITEMSIZE;\n      vehicle = this.vehicles[data[offset]];\n\n      if (vehicle === null) continue;\n\n      wheel = vehicle.wheels[data[offset + 1]];\n\n      wheel.position.set(\n        data[offset + 2],\n        data[offset + 3],\n        data[offset + 4]\n      );\n\n      wheel.quaternion.set(\n        data[offset + 5],\n        data[offset + 6],\n        data[offset + 7],\n        data[offset + 8]\n      );\n    }\n\n    if (this.SUPPORT_TRANSFERABLE)\n      this.send(data.buffer, [data.buffer]); // Give the typed array back to the worker\n  }\n\n  updateConstraints(data) {\n    let constraint, object;\n\n    for (let i = 0; i < (data.length - 1) / CONSTRAINTREPORT_ITEMSIZE; i++) {\n      const offset = 1 + i * CONSTRAINTREPORT_ITEMSIZE;\n      constraint = this.constraints[data[offset]];\n      object = this.objects[data[offset + 1]];\n\n      if (constraint === undefined || object === undefined) continue;\n\n      temp1Vector3.set(\n        data[offset + 2],\n        data[offset + 3],\n        data[offset + 4]\n      );\n\n      temp1Matrix4.extractRotation(object.matrix);\n      temp1Vector3.applyMatrix4(temp1Matrix4);\n\n      constraint.positiona.addVectors(object.position, temp1Vector3);\n      constraint.appliedImpulse = data[offset + 5];\n    }\n\n    if (this.SUPPORT_TRANSFERABLE)\n      this.send(data.buffer, [data.buffer]); // Give the typed array back to the worker\n  }\n\n  updateCollisions(info) {\n    /**\n     * #TODO\n     * This is probably the worst way ever to handle collisions. The inherent evilness is a residual\n     * effect from the previous version's evilness which mutated when switching to transferable objects.\n     *\n     * If you feel inclined to make this better, please do so.\n     */\n\n    const collisions = {},\n      normal_offsets = {};\n\n    // Build collision manifest\n    for (let i = 0; i < info[1]; i++) {\n      const offset = 2 + i * COLLISIONREPORT_ITEMSIZE;\n      const object = info[offset];\n      const object2 = info[offset + 1];\n\n      normal_offsets[`${object}-${object2}`] = offset + 2;\n      normal_offsets[`${object2}-${object}`] = -1 * (offset + 2);\n\n      // Register collisions for both the object colliding and the object being collided with\n      if (!collisions[object]) collisions[object] = [];\n      collisions[object].push(object2);\n\n      if (!collisions[object2]) collisions[object2] = [];\n      collisions[object2].push(object);\n    }\n\n    // Deal with collisions\n    for (const id1 in this.objects) {\n      if (!this.objects.hasOwnProperty(id1)) continue;\n      const object = this.objects[id1];\n      const component = object.component;\n      const data = component.use('physics').data;\n\n      if (object === null) continue;\n\n      // If object touches anything, ...\n      if (collisions[id1]) {\n        // Clean up touches array\n        for (let j = 0; j < data.touches.length; j++) {\n          if (collisions[id1].indexOf(data.touches[j]) === -1)\n            data.touches.splice(j--, 1);\n        }\n\n        // Handle each colliding object\n        for (let j = 0; j < collisions[id1].length; j++) {\n          const id2 = collisions[id1][j];\n          const object2 = this.objects[id2];\n          const component2 = object2.component;\n          const data2 = component2.use('physics').data;\n\n          if (object2) {\n            // If object was not already touching object2, notify object\n            if (data.touches.indexOf(id2) === -1) {\n              data.touches.push(id2);\n\n              const vel = component.use('physics').getLinearVelocity();\n              const vel2 = component2.use('physics').getLinearVelocity();\n\n              temp1Vector3.subVectors(vel, vel2);\n              const temp1 = temp1Vector3.clone();\n\n              temp1Vector3.subVectors(vel, vel2);\n              const temp2 = temp1Vector3.clone();\n\n              let normal_offset = normal_offsets[`${data.id}-${data2.id}`];\n\n              if (normal_offset > 0) {\n                temp1Vector3.set(\n                  -info[normal_offset],\n                  -info[normal_offset + 1],\n                  -info[normal_offset + 2]\n                );\n              } else {\n                normal_offset *= -1;\n\n                temp1Vector3.set(\n                  info[normal_offset],\n                  info[normal_offset + 1],\n                  info[normal_offset + 2]\n                );\n              }\n\n              component.emit('collision', object2, temp1, temp2, temp1Vector3);\n            }\n          }\n        }\n      } else data.touches.length = 0; // not touching other objects\n    }\n\n    this.collisions = collisions;\n\n    if (this.SUPPORT_TRANSFERABLE)\n      this.send(info.buffer, [info.buffer]); // Give the typed array back to the worker\n  }\n\n  addConstraint(constraint, show_marker) {\n    constraint.id = this.getObjectId();\n    this.constraints[constraint.id] = constraint;\n    constraint.worldModule = this;\n    this.execute('addConstraint', constraint.getDefinition());\n\n    if (show_marker) {\n      let marker;\n\n      switch (constraint.type) {\n        case 'point':\n          marker = new Mesh(\n            new SphereGeometry(1.5),\n            new MeshNormalMaterial()\n          );\n\n          marker.position.copy(constraint.positiona);\n          this.objects[constraint.objecta].add(marker);\n          break;\n\n        case 'hinge':\n          marker = new Mesh(\n            new SphereGeometry(1.5),\n            new MeshNormalMaterial()\n          );\n\n          marker.position.copy(constraint.positiona);\n          this.objects[constraint.objecta].add(marker);\n          break;\n\n        case 'slider':\n          marker = new Mesh(\n            new BoxGeometry(10, 1, 1),\n            new MeshNormalMaterial()\n          );\n\n          marker.position.copy(constraint.positiona);\n\n          // This rotation isn't right if all three axis are non-0 values\n          // TODO: change marker's rotation order to ZYX\n          marker.rotation.set(\n            constraint.axis.y, // yes, y and\n            constraint.axis.x, // x axis are swapped\n            constraint.axis.z\n          );\n          this.objects[constraint.objecta].add(marker);\n          break;\n\n        case 'conetwist':\n          marker = new Mesh(\n            new SphereGeometry(1.5),\n            new MeshNormalMaterial()\n          );\n\n          marker.position.copy(constraint.positiona);\n          this.objects[constraint.objecta].add(marker);\n          break;\n\n        case 'dof':\n          marker = new Mesh(\n            new SphereGeometry(1.5),\n            new MeshNormalMaterial()\n          );\n\n          marker.position.copy(constraint.positiona);\n          this.objects[constraint.objecta].add(marker);\n          break;\n        default:\n      }\n    }\n\n    return constraint;\n  }\n\n  onSimulationResume() {\n    this.execute('onSimulationResume', {});\n  }\n\n  removeConstraint(constraint) {\n    if (this.constraints[constraint.id] !== undefined) {\n      this.execute('removeConstraint', {id: constraint.id});\n      delete this.constraints[constraint.id];\n    }\n  }\n\n  execute(cmd, params) {\n    this.send({cmd, params});\n  }\n\n  onAddCallback(component) {\n    const object = component.native;\n    const data = object.component.use('physics').data;\n\n    if (data) {\n      component.manager.set('module:world', this);\n      data.id = this.getObjectId();\n      object.component.use('physics').data = data;\n\n      if (object instanceof Vehicle) {\n        this.onAddCallback(object.mesh);\n        this.vehicles[data.id] = object;\n        this.execute('addVehicle', data);\n      } else {\n        component.__dirtyPosition = false;\n        component.__dirtyRotation = false;\n        this.objects[data.id] = object;\n\n        if (object.children.length) {\n          data.children = [];\n          addObjectChildren(object, object);\n        }\n\n        // object.quaternion.setFromEuler(object.rotation);\n        //\n        // console.log(object.component);\n        // console.log(object.rotation);\n\n        // Object starting position + rotation\n        data.position = {\n          x: object.position.x,\n          y: object.position.y,\n          z: object.position.z\n        };\n\n        data.rotation = {\n          x: object.quaternion.x,\n          y: object.quaternion.y,\n          z: object.quaternion.z,\n          w: object.quaternion.w\n        };\n\n        if (data.width) data.width *= object.scale.x;\n        if (data.height) data.height *= object.scale.y;\n        if (data.depth) data.depth *= object.scale.z;\n\n        this.execute('addObject', data);\n      }\n\n      component.emit('physics:added');\n    }\n  }\n\n  onRemoveCallback(component) {\n    const object = component.native;\n\n    if (object instanceof Vehicle) {\n      this.execute('removeVehicle', {id: object._physijs.id});\n      while (object.wheels.length) this.remove(object.wheels.pop());\n\n      this.remove(object.mesh);\n      this.vehicles[object._physijs.id] = null;\n    } else {\n      // Mesh.prototype.remove.call(this, object);\n\n      if (object._physijs) {\n        component.manager.remove('module:world');\n        this.objects[object._physijs.id] = null;\n        this.execute('removeObject', {id: object._physijs.id});\n      }\n    }\n  }\n\n  defer(func, args) {\n    return new Promise((resolve) => {\n      if (this.isLoaded) {\n        func(...args);\n        resolve();\n      } else this.loader.then(() => {\n        func(...args);\n        resolve();\n      });\n    });\n  }\n\n  manager(manager) {\n    manager.set('physicsWorker', this.worker);\n  }\n\n  bridge = {\n    onAdd(component, self) {\n      if (component.use('physics')) return self.defer(self.onAddCallback.bind(self), [component]);\n      return;\n    },\n\n    onRemove(component, self) {\n      if (component.use('physics')) return self.defer(self.onRemoveCallback.bind(self), [component]);\n      return;\n    }\n  };\n\n  integrate(self) {\n    // ...\n\n    this.setFixedTimeStep = function(fixedTimeStep) {\n      if (fixedTimeStep) self.execute('setFixedTimeStep', fixedTimeStep);\n    }\n\n    this.setGravity = function(gravity) {\n      if (gravity) self.execute('setGravity', gravity);\n    }\n\n    this.addConstraint = self.addConstraint.bind(self);\n\n    this.simulate = function(timeStep, maxSubSteps) {\n      if (self._stats) self._stats.begin();\n\n      if (self.isSimulating) return false;\n      self.isSimulating = true;\n\n      for (const object_id in self.objects) {\n        if (!self.objects.hasOwnProperty(object_id)) continue;\n\n        const object = self.objects[object_id];\n        const component = object.component;\n        const data = component.use('physics').data;\n\n        if (object !== null && (component.__dirtyPosition || component.__dirtyRotation)) {\n          const update = {id: data.id};\n\n          if (component.__dirtyPosition) {\n            update.pos = {\n              x: object.position.x,\n              y: object.position.y,\n              z: object.position.z\n            };\n\n            if (data.isSoftbody) object.position.set(0, 0, 0);\n\n            component.__dirtyPosition = false;\n          }\n\n          if (component.__dirtyRotation) {\n            update.quat = {\n              x: object.quaternion.x,\n              y: object.quaternion.y,\n              z: object.quaternion.z,\n              w: object.quaternion.w\n            };\n\n            if (data.isSoftbody) object.rotation.set(0, 0, 0);\n\n            component.__dirtyRotation = false;\n          }\n\n          self.execute('updateTransform', update);\n        }\n      }\n\n      self.execute('simulate', {timeStep, maxSubSteps});\n\n      if (self._stats) self._stats.end();\n      return true;\n    }\n\n    // const simulateProcess = (t) => {\n    //   window.requestAnimationFrame(simulateProcess);\n\n    //   this.simulate(1/60, 1); // delta, 1\n    // }\n\n    // simulateProcess();\n\n    self.loader.then(() => {\n      self.simulateLoop = new Loop((clock) => {\n        this.simulate(clock.getDelta(), 1); // delta, 1\n      });\n\n      self.simulateLoop.start(this);\n\n      this.setGravity(self.options.gravity);\n    });\n  }\n}\n","var TARGET = typeof Symbol === 'undefined' ? '__target' : Symbol(),\n    SCRIPT_TYPE = 'application/javascript',\n    BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder,\n    URL = window.URL || window.webkitURL,\n    Worker = window.Worker;\n\n/**\n * Returns a wrapper around Web Worker code that is constructible.\n *\n * @function shimWorker\n *\n * @param { String }    filename    The name of the file\n * @param { Function }  fn          Function wrapping the code of the worker\n */\nexport default function shimWorker (filename, fn) {\n    return function ShimWorker (forceFallback) {\n        var o = this;\n\n        if (!fn) {\n            return new Worker(filename);\n        }\n        else if (Worker && !forceFallback) {\n            // Convert the function's inner code to a string to construct the worker\n            var source = fn.toString().replace(/^function.+?{/, '').slice(0, -1),\n                objURL = createSourceObject(source);\n\n            this[TARGET] = new Worker(objURL);\n            URL.revokeObjectURL(objURL);\n            return this[TARGET];\n        }\n        else {\n            var selfShim = {\n                    postMessage: function(m) {\n                        if (o.onmessage) {\n                            setTimeout(function(){ o.onmessage({ data: m, target: selfShim }) });\n                        }\n                    }\n                };\n\n            fn.call(selfShim);\n            this.postMessage = function(m) {\n                setTimeout(function(){ selfShim.onmessage({ data: m, target: o }) });\n            };\n            this.isThisThread = true;\n        }\n    };\n};\n\n// Test Worker capabilities\nif (Worker) {\n    var testWorker,\n        objURL = createSourceObject('self.onmessage = function () {}'),\n        testArray = new Uint8Array(1);\n\n    try {\n        // No workers via blobs in Edge 12 and IE 11 and lower :(\n        if (/(?:Trident|Edge)\\/(?:[567]|12)/i.test(navigator.userAgent)) {\n            throw new Error('Not available');\n        }\n        testWorker = new Worker(objURL);\n\n        // Native browser on some Samsung devices throws for transferables, let's detect it\n        testWorker.postMessage(testArray, [testArray.buffer]);\n    }\n    catch (e) {\n        Worker = null;\n    }\n    finally {\n        URL.revokeObjectURL(objURL);\n        if (testWorker) {\n            testWorker.terminate();\n        }\n    }\n}\n\nfunction createSourceObject(str) {\n    try {\n        return URL.createObjectURL(new Blob([str], { type: SCRIPT_TYPE }));\n    }\n    catch (e) {\n        var blob = new BlobBuilder();\n        blob.append(str);\n        return URL.createObjectURL(blob.getBlob(type));\n    }\n}\n","import shimWorker from 'rollup-plugin-bundle-worker';\nexport default new shimWorker(\"../worker.js\", function (window, document) {\nvar self = this;\nfunction Events(target) {\n  var events = {},\n    empty = [];\n  target = target || this\n  /**\n   *  On: listen to events\n   */\n  target.on = function (type, func, ctx) {\n    (events[type] = events[type] || []).push([func, ctx])\n    return target\n  }\n  /**\n   *  Off: stop listening to event / specific callback\n   */\n  target.off = function (type, func) {\n    type || (events = {})\n    var list = events[type] || empty,\n      i = list.length = func ? list.length : 0;\n    while (i--) func == list[i][0] && list.splice(i, 1)\n    return target\n  }\n  /**\n   * Emit: send event, callbacks will be triggered\n   */\n  target.emit = function (type) {\n    var e = events[type] || empty,\n      list = e.length > 0 ? e.slice(0, e.length) : e,\n      i = 0,\n      j;\n    while (j = list[i++]) j[0].apply(j[1], empty.slice.call(arguments, 1))\n    return target\n  };\n};\n\nconst insideWorker = !self.document;\nif (!insideWorker) self = new Events();\n\nlet send = insideWorker ? (self.webkitPostMessage || self.postMessage) : function (data) {\n  self.emit('message', { data });\n};\n\nself.send = send;\n\nlet SUPPORT_TRANSFERABLE;\n\nif (insideWorker) {\n  const ab = new ArrayBuffer(1);\n\n  send(ab, [ab]);\n  SUPPORT_TRANSFERABLE = (ab.byteLength === 0);\n}\n\nconst MESSAGE_TYPES = {\n  WORLDREPORT: 0,\n  COLLISIONREPORT: 1,\n  VEHICLEREPORT: 2,\n  CONSTRAINTREPORT: 3,\n  SOFTREPORT: 4\n};\n\n// temp variables\nlet _object,\n  _vector,\n  _transform,\n  _transform_pos,\n  _softbody_enabled = false,\n  last_simulation_duration = 0,\n\n  _num_objects = 0,\n  _num_rigidbody_objects = 0,\n  _num_softbody_objects = 0,\n  _num_wheels = 0,\n  _num_constraints = 0,\n  _softbody_report_size = 0,\n\n  // world variables\n  fixedTimeStep, // used when calling stepSimulation\n  last_simulation_time,\n\n  world,\n  _vec3_1,\n  _vec3_2,\n  _vec3_3,\n  _quat;\n\n// private cache\nconst public_functions = {},\n  _objects = [],\n  _vehicles = [],\n  _constraints = [],\n  _objects_ammo = {},\n  _object_shapes = {},\n\n  // The following objects are to track objects that ammo.js doesn't clean\n  // up. All are cleaned up when they're corresponding body is destroyed.\n  // Unfortunately, it's very difficult to get at these objects from the\n  // body, so we have to track them ourselves.\n  _motion_states = {},\n  // Don't need to worry about it for cached shapes.\n  _noncached_shapes = {},\n  // A body with a compound shape always has a regular shape as well, so we\n  // have track them separately.\n  _compound_shapes = {};\n\n// object reporting\nlet REPORT_CHUNKSIZE, // report array is increased in increments of this chunk size\n  worldreport,\n  softreport,\n  collisionreport,\n  vehiclereport,\n  constraintreport;\n\nconst WORLDREPORT_ITEMSIZE = 14, // how many float values each reported item needs\n  COLLISIONREPORT_ITEMSIZE = 5, // one float for each object id, and a Vec3 contact normal\n  VEHICLEREPORT_ITEMSIZE = 9, // vehicle id, wheel index, 3 for position, 4 for rotation\n  CONSTRAINTREPORT_ITEMSIZE = 6; // constraint id, offset object, offset, applied impulse\n\nconst getShapeFromCache = (cache_key) => {\n  if (_object_shapes[cache_key] !== undefined)\n    return _object_shapes[cache_key];\n\n  return null;\n};\n\nconst setShapeCache = (cache_key, shape) => {\n  _object_shapes[cache_key] = shape;\n};\n\nconst createShape = (description) => {\n  let shape;\n\n  _transform.setIdentity();\n  switch (description.type) {\n  case 'compound':\n    {\n      shape = new Ammo.btCompoundShape();\n\n      break;\n    }\n  case 'plane':\n    {\n      const cache_key = `plane_${description.normal.x}_${description.normal.y}_${description.normal.z}`;\n\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        _vec3_1.setX(description.normal.x);\n        _vec3_1.setY(description.normal.y);\n        _vec3_1.setZ(description.normal.z);\n        shape = new Ammo.btStaticPlaneShape(_vec3_1, 0);\n        setShapeCache(cache_key, shape);\n      }\n\n      break;\n    }\n  case 'box':\n    {\n      const cache_key = `box_${description.width}_${description.height}_${description.depth}`;\n\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        _vec3_1.setX(description.width / 2);\n        _vec3_1.setY(description.height / 2);\n        _vec3_1.setZ(description.depth / 2);\n        shape = new Ammo.btBoxShape(_vec3_1);\n        setShapeCache(cache_key, shape);\n      }\n\n      break;\n    }\n  case 'sphere':\n    {\n      const cache_key = `sphere_${description.radius}`;\n\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        shape = new Ammo.btSphereShape(description.radius);\n        setShapeCache(cache_key, shape);\n      }\n\n      break;\n    }\n  case 'cylinder':\n    {\n      const cache_key = `cylinder_${description.width}_${description.height}_${description.depth}`;\n\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        _vec3_1.setX(description.width / 2);\n        _vec3_1.setY(description.height / 2);\n        _vec3_1.setZ(description.depth / 2);\n        shape = new Ammo.btCylinderShape(_vec3_1);\n        setShapeCache(cache_key, shape);\n      }\n\n      break;\n    }\n  case 'capsule':\n    {\n      const cache_key = `capsule_${description.radius}_${description.height}`;\n\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        // In Bullet, capsule height excludes the end spheres\n        shape = new Ammo.btCapsuleShape(description.radius, description.height - 2 * description.radius);\n        setShapeCache(cache_key, shape);\n      }\n\n      break;\n    }\n  case 'cone':\n    {\n      const cache_key = `cone_${description.radius}_${description.height}`;\n\n      if ((shape = getShapeFromCache(cache_key)) === null) {\n        shape = new Ammo.btConeShape(description.radius, description.height);\n        setShapeCache(cache_key, shape);\n      }\n\n      break;\n    }\n  case 'concave':\n    {\n      const triangle_mesh = new Ammo.btTriangleMesh();\n      if (!description.data.length) return false;\n      const data = description.data;\n\n      for (let i = 0; i < data.length / 9; i++) {\n        _vec3_1.setX(data[i * 9]);\n        _vec3_1.setY(data[i * 9 + 1]);\n        _vec3_1.setZ(data[i * 9 + 2]);\n\n        _vec3_2.setX(data[i * 9 + 3]);\n        _vec3_2.setY(data[i * 9 + 4]);\n        _vec3_2.setZ(data[i * 9 + 5]);\n\n        _vec3_3.setX(data[i * 9 + 6]);\n        _vec3_3.setY(data[i * 9 + 7]);\n        _vec3_3.setZ(data[i * 9 + 8]);\n\n        triangle_mesh.addTriangle(\n          _vec3_1,\n          _vec3_2,\n          _vec3_3,\n          false\n        );\n      }\n\n      shape = new Ammo.btBvhTriangleMeshShape(\n        triangle_mesh,\n        true,\n        true\n      );\n\n      _noncached_shapes[description.id] = shape;\n\n      break;\n    }\n  case 'convex':\n    {\n      shape = new Ammo.btConvexHullShape();\n      const data = description.data;\n\n      for (let i = 0; i < data.length / 3; i++) {\n        _vec3_1.setX(data[i * 3]);\n        _vec3_1.setY(data[i * 3 + 1]);\n        _vec3_1.setZ(data[i * 3 + 2]);\n\n        shape.addPoint(_vec3_1);\n      }\n\n      _noncached_shapes[description.id] = shape;\n\n      break;\n    }\n  case 'heightfield':\n    {\n      const xpts = description.xpts,\n        ypts = description.ypts,\n        points = description.points,\n        ptr = Ammo._malloc(4 * xpts * ypts);\n\n      for (let i = 0, p = 0, p2 = 0; i < xpts; i++) {\n        for (let j = 0; j < ypts; j++) {\n          Ammo.HEAPF32[ptr + p2 >> 2] = points[p];\n\n          p++;\n          p2 += 4;\n        }\n      }\n\n      shape = new Ammo.btHeightfieldTerrainShape(\n        description.xpts,\n        description.ypts,\n        ptr,\n        1, -description.absMaxHeight,\n        description.absMaxHeight,\n        1,\n        'PHY_FLOAT',\n        false\n      );\n\n      _noncached_shapes[description.id] = shape;\n      break;\n    }\n  default:\n    // Not recognized\n    return;\n  }\n\n  return shape;\n};\n\nconst createSoftBody = (description) => {\n  let body;\n\n  const softBodyHelpers = new Ammo.btSoftBodyHelpers();\n\n  switch (description.type) {\n  case 'softTrimesh':\n    {\n      if (!description.aVertices.length) return false;\n\n      body = softBodyHelpers.CreateFromTriMesh(\n        world.getWorldInfo(),\n        description.aVertices,\n        description.aIndices,\n        description.aIndices.length / 3,\n        false\n      );\n\n      break;\n    }\n  case 'softClothMesh':\n    {\n      const cr = description.corners;\n\n      body = softBodyHelpers.CreatePatch(\n        world.getWorldInfo(),\n        new Ammo.btVector3(cr[0], cr[1], cr[2]),\n        new Ammo.btVector3(cr[3], cr[4], cr[5]),\n        new Ammo.btVector3(cr[6], cr[7], cr[8]),\n        new Ammo.btVector3(cr[9], cr[10], cr[11]),\n        description.segments[0],\n        description.segments[1],\n        0,\n        true\n      );\n\n      break;\n    }\n  case 'softRopeMesh':\n    {\n      const data = description.data;\n\n      body = softBodyHelpers.CreateRope(\n        world.getWorldInfo(),\n        new Ammo.btVector3(data[0], data[1], data[2]),\n        new Ammo.btVector3(data[3], data[4], data[5]),\n        data[6] - 1,\n        0\n      );\n\n      break;\n    }\n  default:\n    // Not recognized\n    return;\n  }\n\n  return body;\n};\n\npublic_functions.init = (params = {}) => {\n  if (params.noWorker) {\n    window.Ammo = new params.ammo();\n    public_functions.makeWorld(params);\n    return;\n  }\n\n  if (params.wasmBuffer) {\n    importScripts(params.ammo);\n\n    self.Ammo = new loadAmmoFromBinary(params.wasmBuffer)();\n    send({ cmd: 'ammoLoaded' });\n    public_functions.makeWorld(params);\n  }\n  else {\n    importScripts(params.ammo);\n    send({ cmd: 'ammoLoaded' });\n\n    self.Ammo = new Ammo();\n    public_functions.makeWorld(params);\n  }\n}\n\npublic_functions.makeWorld = (params = {}) => {\n  _transform = new Ammo.btTransform();\n  _transform_pos = new Ammo.btTransform();\n  _vec3_1 = new Ammo.btVector3(0, 0, 0);\n  _vec3_2 = new Ammo.btVector3(0, 0, 0);\n  _vec3_3 = new Ammo.btVector3(0, 0, 0);\n  _quat = new Ammo.btQuaternion(0, 0, 0, 0);\n\n  REPORT_CHUNKSIZE = params.reportsize || 50;\n\n  if (SUPPORT_TRANSFERABLE) {\n    // Transferable messages are supported, take advantage of them with TypedArrays\n    worldreport = new Float32Array(2 + REPORT_CHUNKSIZE * WORLDREPORT_ITEMSIZE); // message id + # of objects to report + chunk size * # of values per object\n    collisionreport = new Float32Array(2 + REPORT_CHUNKSIZE * COLLISIONREPORT_ITEMSIZE); // message id + # of collisions to report + chunk size * # of values per object\n    vehiclereport = new Float32Array(2 + REPORT_CHUNKSIZE * VEHICLEREPORT_ITEMSIZE); // message id + # of vehicles to report + chunk size * # of values per object\n    constraintreport = new Float32Array(2 + REPORT_CHUNKSIZE * CONSTRAINTREPORT_ITEMSIZE); // message id + # of constraints to report + chunk size * # of values per object\n  }\n  else {\n    // Transferable messages are not supported, send data as normal arrays\n    worldreport = [];\n    collisionreport = [];\n    vehiclereport = [];\n    constraintreport = [];\n  }\n\n  worldreport[0] = MESSAGE_TYPES.WORLDREPORT;\n  collisionreport[0] = MESSAGE_TYPES.COLLISIONREPORT;\n  vehiclereport[0] = MESSAGE_TYPES.VEHICLEREPORT;\n  constraintreport[0] = MESSAGE_TYPES.CONSTRAINTREPORT;\n\n  const collisionConfiguration = params.softbody ?\n    new Ammo.btSoftBodyRigidBodyCollisionConfiguration() :\n    new Ammo.btDefaultCollisionConfiguration(),\n    dispatcher = new Ammo.btCollisionDispatcher(collisionConfiguration),\n    solver = new Ammo.btSequentialImpulseConstraintSolver();\n\n  let broadphase;\n\n  if (!params.broadphase) params.broadphase = { type: 'dynamic' };\n  // TODO!!!\n  /* if (params.broadphase.type === 'sweepprune') {\n    extend(params.broadphase, {\n      aabbmin: {\n        x: -50,\n        y: -50,\n        z: -50\n      },\n\n      aabbmax: {\n        x: 50,\n        y: 50,\n        z: 50\n      },\n    });\n  }*/\n\n  switch (params.broadphase.type) {\n  case 'sweepprune':\n    _vec3_1.setX(params.broadphase.aabbmin.x);\n    _vec3_1.setY(params.broadphase.aabbmin.y);\n    _vec3_1.setZ(params.broadphase.aabbmin.z);\n\n    _vec3_2.setX(params.broadphase.aabbmax.x);\n    _vec3_2.setY(params.broadphase.aabbmax.y);\n    _vec3_2.setZ(params.broadphase.aabbmax.z);\n\n    broadphase = new Ammo.btAxisSweep3(\n      _vec3_1,\n      _vec3_2\n    );\n\n    break;\n  case 'dynamic':\n  default:\n    broadphase = new Ammo.btDbvtBroadphase();\n    break;\n  }\n\n  world = params.softbody ?\n    new Ammo.btSoftRigidDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration, new Ammo.btDefaultSoftBodySolver()) :\n    new Ammo.btDiscreteDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration);\n  fixedTimeStep = params.fixedTimeStep;\n\n  if (params.softbody) _softbody_enabled = true;\n\n  send({ cmd: 'worldReady' });\n};\n\npublic_functions.setFixedTimeStep = (description) => {\n  fixedTimeStep = description;\n};\n\npublic_functions.setGravity = (description) => {\n  _vec3_1.setX(description.x);\n  _vec3_1.setY(description.y);\n  _vec3_1.setZ(description.z);\n  world.setGravity(_vec3_1);\n};\n\npublic_functions.appendAnchor = (description) => {\n  _objects[description.obj]\n    .appendAnchor(\n      description.node,\n      _objects[description.obj2],\n      description.collisionBetweenLinkedBodies,\n      description.influence\n    );\n}\n\npublic_functions.linkNodes = (description) => {\n  var self_body = _objects[description.self];\n  var other_body = _objects[description.body];\n\n  var self_node = self_body.get_m_nodes().at(description.n1);\n  var other_node = other_body.get_m_nodes().at(description.n2);\n\n  var self_vec = self_node.get_m_x();\n  var other_vec = other_node.get_m_x();\n\n  var force_x = other_vec.x() - self_vec.x();\n  var force_y = other_vec.y() - self_vec.y();\n  var force_z = other_vec.z() - self_vec.z();\n\n\n  // var modifier = 30;\n\n  let cached_distance, linked = false;\n\n  const _loop = setInterval(() => {\n    force_x = other_vec.x() - self_vec.x();\n    force_y = other_vec.y() - self_vec.y();\n    force_z = other_vec.z() - self_vec.z();\n\n    let distance = Math.sqrt(force_x * force_x + force_y * force_y + force_z * force_z);\n\n    if (cached_distance && !linked && cached_distance < distance) { // cached_distance && !linked && cached_distance < distance\n\n      linked = true;\n\n      // let self_vel = self_node.get_m_v();\n      //\n      // _vec3_1.setX(-self_vel.x());\n      // _vec3_1.setY(-self_vel.y());\n      // _vec3_1.setZ(-self_vel.z());\n      //\n      // let other_vel = other_node.get_m_v();\n      //\n      // _vec3_2.setX(-other_vel.x());\n      // _vec3_2.setY(-other_vel.y());\n      // _vec3_2.setZ(-other_vel.z());\n\n      console.log('link!');\n\n      _vec3_1.setX(0);\n      _vec3_1.setY(0);\n      _vec3_1.setZ(0);\n\n      self_body.setVelocity(\n        _vec3_1\n      );\n\n      other_body.setVelocity(\n        _vec3_1\n      );\n\n\n\n      // self_body.addVelocity(_vec3_1);\n      // other_body.addVelocity(_vec3_2);\n\n      // self_relative_x = self_node.x();\n      // self_relative_y = self_node.y();\n      // self_relative_z = self_node.z();\n      //\n      // other_relative_x = other_node.x();\n      // other_relative_y = other_node.y();\n      // other_relative_z = other_node.z();\n\n      // self_relative = new Ammo.btVector3();\n      // self_relative.setX();\n\n      // console.log('link!');\n      // self_body.appendAnchor(description.n1, connector, true, 0.5);\n      // other_body.appendAnchor(description.n2, connector, true, 0.5);\n      // clearInterval(_loop);\n\n      // _vec3_1.setX(0);\n      // _vec3_1.setY(0);\n      // _vec3_1.setZ(0);\n\n      // self_body.setVelocity(_vec3_1);\n      // other_body.setVelocity(_vec3_1);\n\n      // other_body.addForce(\n      //   _vec3_2,\n      //   description.n2\n      // );\n\n      // description.modifier *= 1.6;\n    }\n\n    const modifer2 = linked ? 40 : 1;\n\n    force_x *= Math.max(distance, 1) * description.modifier * modifer2;\n    force_y *= Math.max(distance, 1) * description.modifier * modifer2;\n    force_z *= Math.max(distance, 1) * description.modifier * modifer2;\n\n    _vec3_1.setX(force_x);\n    _vec3_1.setY(force_y);\n    _vec3_1.setZ(force_z);\n\n    _vec3_2.setX(-force_x);\n    _vec3_2.setY(-force_y);\n    _vec3_2.setZ(-force_z);\n\n    self_body.addVelocity(\n      _vec3_1,\n      description.n1\n    );\n\n    other_body.addVelocity(\n      _vec3_2,\n      description.n2\n    );\n\n    // } else {\n    //   // self_relative_x = null;\n    // }\n\n\n\n    // if (self_relative_x) {\n    //   _vec3_1.setX(self_relative_x - self_node.x());\n    //   _vec3_1.setY(self_relative_y - self_node.y());\n    //   _vec3_1.setZ(self_relative_z - self_node.z());\n    //\n    //   _vec3_2.setX(other_relative_x - other_node.x());\n    //   _vec3_2.setY(other_relative_y - other_node.y());\n    //   _vec3_2.setZ(other_relative_z - other_node.z());\n    // } else {\n\n    // }\n\n\n\n\n    cached_distance = distance;\n  }, 10);\n}\n\npublic_functions.appendLink = (description) => {\n  // console.log(Ammo);\n  // console.log(new Ammo.Material());\n\n  // var _mat = new Ammo.Material();\n  //\n  // _mat.set_m_kAST(0);\n  // _mat.set_m_kLST(0);\n  // _mat.set_m_kVST(0);\n  //\n  // _objects[description.self].appendLink(\n  //   description.n1,\n  //   description.n2,\n  //   _mat,\n  //   false\n  // );\n\n  _vec3_1.setX(1000);\n  _vec3_1.setY(0);\n  _vec3_1.setZ(0);\n\n  _objects[description.self].addForce(\n    _vec3_1,\n    description.n1\n  );\n}\n\npublic_functions.appendLinearJoint = (description) => {\n  // console.log('Ammo', Ammo);\n  var specs = new Ammo.Specs();\n  var _pos = description.specs.position;\n\n  specs.set_position(new Ammo.btVector3(_pos[0], _pos[1], _pos[2]));\n  if (description.specs.erp) specs.set_erp(description.specs.erp);\n  if (description.specs.cfm) specs.set_cfm(description.specs.cfm);\n  if (description.specs.split) specs.set_split(description.specs.split);\n\n  // console.log(specs);\n  //\n  // // ljoint.set_m_rpos(\n  // //   new Ammo.btVector3(_pos1[0], _pos1[1], _pos1[2]),\n  // //   new Ammo.btVector3(_pos2[0], _pos2[1], _pos2[2])\n  // // );\n  //\n  // // console.log('ljoint', ljoint);\n  //\n\n  // console.log('body', _objects[description.body]);\n  _objects[description.self]\n    .appendLinearJoint(\n      specs,\n      _objects[description.body]\n    );\n}\n\npublic_functions.addObject = (description) => {\n  let body, motionState;\n\n  if (description.type.indexOf('soft') !== -1) {\n    body = createSoftBody(description);\n\n    const sbConfig = body.get_m_cfg();\n\n    if (description.viterations) sbConfig.set_viterations(description.viterations);\n    if (description.piterations) sbConfig.set_piterations(description.piterations);\n    if (description.diterations) sbConfig.set_diterations(description.diterations);\n    if (description.citerations) sbConfig.set_citerations(description.citerations);\n    sbConfig.set_collisions(0x11);\n    sbConfig.set_kDF(description.friction);\n    sbConfig.set_kDP(description.damping);\n    if (description.pressure) sbConfig.set_kPR(description.pressure);\n    if (description.drag) sbConfig.set_kDG(description.drag);\n    if (description.lift) sbConfig.set_kLF(description.lift);\n    if (description.anchorHardness) sbConfig.set_kAHR(description.anchorHardness);\n    if (description.rigidHardness) sbConfig.set_kCHR(description.rigidHardness);\n\n    if (description.klst) body.get_m_materials().at(0).set_m_kLST(description.klst);\n    if (description.kast) body.get_m_materials().at(0).set_m_kAST(description.kast);\n    if (description.kvst) body.get_m_materials().at(0).set_m_kVST(description.kvst);\n\n    Ammo.castObject(body, Ammo.btCollisionObject).getCollisionShape().setMargin(\n      typeof description.margin !== 'undefined' ? description.margin : 0.1\n    );\n\n    // Ammo.castObject(body, Ammo.btCollisionObject).getCollisionShape().setMargin(0);\n\n    // Ammo.castObject(body, Ammo.btCollisionObject).getCollisionShape().setLocalScaling(_vec3_1);\n    body.setActivationState(description.state || 4);\n    body.type = 0; // SoftBody.\n    if (description.type === 'softRopeMesh') body.rope = true;\n    if (description.type === 'softClothMesh') body.cloth = true;\n\n    _transform.setIdentity();\n\n    // @test\n    _quat.setX(description.rotation.x);\n    _quat.setY(description.rotation.y);\n    _quat.setZ(description.rotation.z);\n    _quat.setW(description.rotation.w);\n    body.rotate(_quat);\n\n    _vec3_1.setX(description.position.x);\n    _vec3_1.setY(description.position.y);\n    _vec3_1.setZ(description.position.z);\n    body.translate(_vec3_1);\n\n    _vec3_1.setX(description.scale.x);\n    _vec3_1.setY(description.scale.y);\n    _vec3_1.setZ(description.scale.z);\n    body.scale(_vec3_1);\n\n    body.setTotalMass(description.mass, false);\n    world.addSoftBody(body, 1, -1);\n    if (description.type === 'softTrimesh') _softbody_report_size += body.get_m_faces().size() * 3;\n    else if (description.type === 'softRopeMesh') _softbody_report_size += body.get_m_nodes().size();\n    else _softbody_report_size += body.get_m_nodes().size() * 3;\n\n    _num_softbody_objects++;\n  }\n  else {\n    let shape = createShape(description);\n\n    if (!shape) return;\n\n    // If there are children then this is a compound shape\n    if (description.children) {\n      const compound_shape = new Ammo.btCompoundShape();\n      compound_shape.addChildShape(_transform, shape);\n\n      for (let i = 0; i < description.children.length; i++) {\n        const _child = description.children[i];\n\n        const trans = new Ammo.btTransform();\n        trans.setIdentity();\n\n        _vec3_1.setX(_child.position_offset.x);\n        _vec3_1.setY(_child.position_offset.y);\n        _vec3_1.setZ(_child.position_offset.z);\n        trans.setOrigin(_vec3_1);\n\n        _quat.setX(_child.rotation.x);\n        _quat.setY(_child.rotation.y);\n        _quat.setZ(_child.rotation.z);\n        _quat.setW(_child.rotation.w);\n        trans.setRotation(_quat);\n\n        shape = createShape(description.children[i]);\n        compound_shape.addChildShape(trans, shape);\n        Ammo.destroy(trans);\n      }\n\n      shape = compound_shape;\n      _compound_shapes[description.id] = shape;\n    }\n\n    _vec3_1.setX(description.scale.x);\n    _vec3_1.setY(description.scale.y);\n    _vec3_1.setZ(description.scale.z);\n\n    shape.setLocalScaling(_vec3_1);\n    shape.setMargin(\n      typeof description.margin !== 'undefined' ? description.margin : 0\n    );\n\n    _vec3_1.setX(0);\n    _vec3_1.setY(0);\n    _vec3_1.setZ(0);\n    shape.calculateLocalInertia(description.mass, _vec3_1);\n\n    _transform.setIdentity();\n\n    _vec3_2.setX(description.position.x);\n    _vec3_2.setY(description.position.y);\n    _vec3_2.setZ(description.position.z);\n    _transform.setOrigin(_vec3_2);\n\n    _quat.setX(description.rotation.x);\n    _quat.setY(description.rotation.y);\n    _quat.setZ(description.rotation.z);\n    _quat.setW(description.rotation.w);\n    _transform.setRotation(_quat);\n\n    motionState = new Ammo.btDefaultMotionState(_transform); // #TODO: btDefaultMotionState supports center of mass offset as second argument - implement\n    const rbInfo = new Ammo.btRigidBodyConstructionInfo(description.mass, motionState, shape, _vec3_1);\n\n    rbInfo.set_m_friction(description.friction);\n    rbInfo.set_m_restitution(description.restitution);\n    rbInfo.set_m_linearDamping(description.damping);\n    rbInfo.set_m_angularDamping(description.damping);\n\n    body = new Ammo.btRigidBody(rbInfo);\n    body.setActivationState(description.state || 4);\n    Ammo.destroy(rbInfo);\n\n    if (typeof description.collision_flags !== 'undefined') body.setCollisionFlags(description.collision_flags);\n\n    if (description.group && description.mask) world.addRigidBody(body, description.group, description.mask);\n    else world.addRigidBody(body);\n    body.type = 1; // RigidBody.\n    _num_rigidbody_objects++;\n  }\n\n  body.activate();\n\n  body.id = description.id;\n  _objects[body.id] = body;\n  _motion_states[body.id] = motionState;\n\n  _objects_ammo[body.a === undefined ? body.ptr : body.a] = body.id;\n  _num_objects++;\n\n  send({ cmd: 'objectReady', params: body.id });\n};\n\npublic_functions.addVehicle = (description) => {\n  const vehicle_tuning = new Ammo.btVehicleTuning();\n\n  vehicle_tuning.set_m_suspensionStiffness(description.suspension_stiffness);\n  vehicle_tuning.set_m_suspensionCompression(description.suspension_compression);\n  vehicle_tuning.set_m_suspensionDamping(description.suspension_damping);\n  vehicle_tuning.set_m_maxSuspensionTravelCm(description.max_suspension_travel);\n  vehicle_tuning.set_m_maxSuspensionForce(description.max_suspension_force);\n\n  const vehicle = new Ammo.btRaycastVehicle(\n    vehicle_tuning,\n    _objects[description.rigidBody],\n    new Ammo.btDefaultVehicleRaycaster(world)\n  );\n\n  vehicle.tuning = vehicle_tuning;\n  _objects[description.rigidBody].setActivationState(4);\n  vehicle.setCoordinateSystem(0, 1, 2);\n\n  world.addVehicle(vehicle);\n  _vehicles[description.id] = vehicle;\n};\npublic_functions.removeVehicle = (description) => {\n  _vehicles[description.id] = null;\n};\n\npublic_functions.addWheel = (description) => {\n  if (_vehicles[description.id] !== undefined) {\n    let tuning = _vehicles[description.id].tuning;\n    if (description.tuning !== undefined) {\n      tuning = new Ammo.btVehicleTuning();\n      tuning.set_m_suspensionStiffness(description.tuning.suspension_stiffness);\n      tuning.set_m_suspensionCompression(description.tuning.suspension_compression);\n      tuning.set_m_suspensionDamping(description.tuning.suspension_damping);\n      tuning.set_m_maxSuspensionTravelCm(description.tuning.max_suspension_travel);\n      tuning.set_m_maxSuspensionForce(description.tuning.max_suspension_force);\n    }\n\n    _vec3_1.setX(description.connection_point.x);\n    _vec3_1.setY(description.connection_point.y);\n    _vec3_1.setZ(description.connection_point.z);\n\n    _vec3_2.setX(description.wheel_direction.x);\n    _vec3_2.setY(description.wheel_direction.y);\n    _vec3_2.setZ(description.wheel_direction.z);\n\n    _vec3_3.setX(description.wheel_axle.x);\n    _vec3_3.setY(description.wheel_axle.y);\n    _vec3_3.setZ(description.wheel_axle.z);\n\n    _vehicles[description.id].addWheel(\n      _vec3_1,\n      _vec3_2,\n      _vec3_3,\n      description.suspension_rest_length,\n      description.wheel_radius,\n      tuning,\n      description.is_front_wheel\n    );\n  }\n\n  _num_wheels++;\n\n  if (SUPPORT_TRANSFERABLE) {\n    vehiclereport = new Float32Array(1 + _num_wheels * VEHICLEREPORT_ITEMSIZE); // message id & ( # of objects to report * # of values per object )\n    vehiclereport[0] = MESSAGE_TYPES.VEHICLEREPORT;\n  }\n  else vehiclereport = [MESSAGE_TYPES.VEHICLEREPORT];\n};\n\npublic_functions.setSteering = (details) => {\n  if (_vehicles[details.id] !== undefined) _vehicles[details.id].setSteeringValue(details.steering, details.wheel);\n};\n\npublic_functions.setBrake = (details) => {\n  if (_vehicles[details.id] !== undefined) _vehicles[details.id].setBrake(details.brake, details.wheel);\n};\n\npublic_functions.applyEngineForce = (details) => {\n  if (_vehicles[details.id] !== undefined) _vehicles[details.id].applyEngineForce(details.force, details.wheel);\n};\n\npublic_functions.removeObject = (details) => {\n  if (_objects[details.id].type === 0) {\n    _num_softbody_objects--;\n    _softbody_report_size -= _objects[details.id].get_m_nodes().size();\n    world.removeSoftBody(_objects[details.id]);\n  }\n  else if (_objects[details.id].type === 1) {\n    _num_rigidbody_objects--;\n    world.removeRigidBody(_objects[details.id]);\n    Ammo.destroy(_motion_states[details.id]);\n  }\n\n  Ammo.destroy(_objects[details.id]);\n  if (_compound_shapes[details.id]) Ammo.destroy(_compound_shapes[details.id]);\n  if (_noncached_shapes[details.id]) Ammo.destroy(_noncached_shapes[details.id]);\n\n  _objects_ammo[_objects[details.id].a === undefined ? _objects[details.id].a : _objects[details.id].ptr] = null;\n  _objects[details.id] = null;\n  _motion_states[details.id] = null;\n\n  if (_compound_shapes[details.id]) _compound_shapes[details.id] = null;\n  if (_noncached_shapes[details.id]) _noncached_shapes[details.id] = null;\n  _num_objects--;\n};\n\npublic_functions.updateTransform = (details) => {\n  _object = _objects[details.id];\n\n  if (_object.type === 1) {\n    _object.getMotionState().getWorldTransform(_transform);\n\n    if (details.pos) {\n      _vec3_1.setX(details.pos.x);\n      _vec3_1.setY(details.pos.y);\n      _vec3_1.setZ(details.pos.z);\n      _transform.setOrigin(_vec3_1);\n    }\n\n    if (details.quat) {\n      _quat.setX(details.quat.x);\n      _quat.setY(details.quat.y);\n      _quat.setZ(details.quat.z);\n      _quat.setW(details.quat.w);\n      _transform.setRotation(_quat);\n    }\n\n    _object.setWorldTransform(_transform);\n    _object.activate();\n  }\n  else if (_object.type === 0) {\n    // _object.getWorldTransform(_transform);\n\n    if (details.pos) {\n      _vec3_1.setX(details.pos.x);\n      _vec3_1.setY(details.pos.y);\n      _vec3_1.setZ(details.pos.z);\n      _transform.setOrigin(_vec3_1);\n    }\n\n    if (details.quat) {\n      _quat.setX(details.quat.x);\n      _quat.setY(details.quat.y);\n      _quat.setZ(details.quat.z);\n      _quat.setW(details.quat.w);\n      _transform.setRotation(_quat);\n    }\n\n    _object.transform(_transform);\n  }\n};\n\npublic_functions.updateMass = (details) => {\n  // #TODO: changing a static object into dynamic is buggy\n  _object = _objects[details.id];\n\n  // Per http://www.bulletphysics.org/Bullet/phpBB3/viewtopic.php?p=&f=9&t=3663#p13816\n  world.removeRigidBody(_object);\n\n  _vec3_1.setX(0);\n  _vec3_1.setY(0);\n  _vec3_1.setZ(0);\n\n  _object.setMassProps(details.mass, _vec3_1);\n  world.addRigidBody(_object);\n  _object.activate();\n};\n\npublic_functions.applyCentralImpulse = (details) => {\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].applyCentralImpulse(_vec3_1);\n  _objects[details.id].activate();\n};\n\npublic_functions.applyImpulse = (details) => {\n  _vec3_1.setX(details.impulse_x);\n  _vec3_1.setY(details.impulse_y);\n  _vec3_1.setZ(details.impulse_z);\n\n  _vec3_2.setX(details.x);\n  _vec3_2.setY(details.y);\n  _vec3_2.setZ(details.z);\n\n  _objects[details.id].applyImpulse(\n    _vec3_1,\n    _vec3_2\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.applyTorque = (details) => {\n  _vec3_1.setX(details.torque_x);\n  _vec3_1.setY(details.torque_y);\n  _vec3_1.setZ(details.torque_z);\n\n  _objects[details.id].applyTorque(\n    _vec3_1\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.applyCentralForce = (details) => {\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].applyCentralForce(_vec3_1);\n  _objects[details.id].activate();\n};\n\npublic_functions.applyForce = (details) => {\n  _vec3_1.setX(details.force_x);\n  _vec3_1.setY(details.force_y);\n  _vec3_1.setZ(details.force_z);\n\n  _vec3_2.setX(details.x);\n  _vec3_2.setY(details.y);\n  _vec3_2.setZ(details.z);\n\n  _objects[details.id].applyForce(\n    _vec3_1,\n    _vec3_2\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.onSimulationResume = () => {\n  last_simulation_time = Date.now();\n};\n\npublic_functions.setAngularVelocity = (details) => {\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].setAngularVelocity(\n    _vec3_1\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.setLinearVelocity = (details) => {\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].setLinearVelocity(\n    _vec3_1\n  );\n  _objects[details.id].activate();\n};\n\npublic_functions.setAngularFactor = (details) => {\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].setAngularFactor(\n    _vec3_1\n  );\n};\n\npublic_functions.setLinearFactor = (details) => {\n  _vec3_1.setX(details.x);\n  _vec3_1.setY(details.y);\n  _vec3_1.setZ(details.z);\n\n  _objects[details.id].setLinearFactor(\n    _vec3_1\n  );\n};\n\npublic_functions.setDamping = (details) => {\n  _objects[details.id].setDamping(details.linear, details.angular);\n};\n\npublic_functions.setCcdMotionThreshold = (details) => {\n  _objects[details.id].setCcdMotionThreshold(details.threshold);\n};\n\npublic_functions.setCcdSweptSphereRadius = (details) => {\n  _objects[details.id].setCcdSweptSphereRadius(details.radius);\n};\n\npublic_functions.addConstraint = (details) => {\n  let constraint;\n\n  switch (details.type) {\n\n  case 'point':\n    {\n      if (details.objectb === undefined) {\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        constraint = new Ammo.btPoint2PointConstraint(\n          _objects[details.objecta],\n          _vec3_1\n        );\n      }\n      else {\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        _vec3_2.setX(details.positionb.x);\n        _vec3_2.setY(details.positionb.y);\n        _vec3_2.setZ(details.positionb.z);\n\n        constraint = new Ammo.btPoint2PointConstraint(\n          _objects[details.objecta],\n          _objects[details.objectb],\n          _vec3_1,\n          _vec3_2\n        );\n      }\n      break;\n    }\n  case 'hinge':\n    {\n      if (details.objectb === undefined) {\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        _vec3_2.setX(details.axis.x);\n        _vec3_2.setY(details.axis.y);\n        _vec3_2.setZ(details.axis.z);\n\n        constraint = new Ammo.btHingeConstraint(\n          _objects[details.objecta],\n          _vec3_1,\n          _vec3_2\n        );\n\n      }\n      else {\n        _vec3_1.setX(details.positiona.x);\n        _vec3_1.setY(details.positiona.y);\n        _vec3_1.setZ(details.positiona.z);\n\n        _vec3_2.setX(details.positionb.x);\n        _vec3_2.setY(details.positionb.y);\n        _vec3_2.setZ(details.positionb.z);\n\n        _vec3_3.setX(details.axis.x);\n        _vec3_3.setY(details.axis.y);\n        _vec3_3.setZ(details.axis.z);\n\n        constraint = new Ammo.btHingeConstraint(\n          _objects[details.objecta],\n          _objects[details.objectb],\n          _vec3_1,\n          _vec3_2,\n          _vec3_3,\n          _vec3_3\n        );\n      }\n      break;\n    }\n  case 'slider':\n    {\n      let transformb;\n      const transforma = new Ammo.btTransform();\n\n      _vec3_1.setX(details.positiona.x);\n      _vec3_1.setY(details.positiona.y);\n      _vec3_1.setZ(details.positiona.z);\n\n      transforma.setOrigin(_vec3_1);\n\n      let rotation = transforma.getRotation();\n      rotation.setEuler(details.axis.x, details.axis.y, details.axis.z);\n      transforma.setRotation(rotation);\n\n      if (details.objectb) {\n        transformb = new Ammo.btTransform();\n\n        _vec3_2.setX(details.positionb.x);\n        _vec3_2.setY(details.positionb.y);\n        _vec3_2.setZ(details.positionb.z);\n\n        transformb.setOrigin(_vec3_2);\n\n        rotation = transformb.getRotation();\n        rotation.setEuler(details.axis.x, details.axis.y, details.axis.z);\n        transformb.setRotation(rotation);\n\n        constraint = new Ammo.btSliderConstraint(\n          _objects[details.objecta],\n          _objects[details.objectb],\n          transforma,\n          transformb,\n          true\n        );\n      }\n      else {\n        constraint = new Ammo.btSliderConstraint(\n          _objects[details.objecta],\n          transforma,\n          true\n        );\n      }\n\n      constraint.ta = transforma;\n      constraint.tb = transformb;\n\n      Ammo.destroy(transforma);\n      if (transformb !== undefined) Ammo.destroy(transformb);\n\n      break;\n    }\n  case 'conetwist':\n    {\n      const transforma = new Ammo.btTransform();\n      transforma.setIdentity();\n\n      const transformb = new Ammo.btTransform();\n      transformb.setIdentity();\n\n      _vec3_1.setX(details.positiona.x);\n      _vec3_1.setY(details.positiona.y);\n      _vec3_1.setZ(details.positiona.z);\n\n      _vec3_2.setX(details.positionb.x);\n      _vec3_2.setY(details.positionb.y);\n      _vec3_2.setZ(details.positionb.z);\n\n      transforma.setOrigin(_vec3_1);\n      transformb.setOrigin(_vec3_2);\n\n      let rotation = transforma.getRotation();\n      rotation.setEulerZYX(-details.axisa.z, -details.axisa.y, -details.axisa.x);\n      transforma.setRotation(rotation);\n\n      rotation = transformb.getRotation();\n      rotation.setEulerZYX(-details.axisb.z, -details.axisb.y, -details.axisb.x);\n      transformb.setRotation(rotation);\n\n      constraint = new Ammo.btConeTwistConstraint(\n        _objects[details.objecta],\n        _objects[details.objectb],\n        transforma,\n        transformb\n      );\n\n      constraint.setLimit(Math.PI, 0, Math.PI);\n\n      constraint.ta = transforma;\n      constraint.tb = transformb;\n\n      Ammo.destroy(transforma);\n      Ammo.destroy(transformb);\n\n      break;\n    }\n  case 'dof':\n    {\n      let transformb;\n\n      const transforma = new Ammo.btTransform();\n      transforma.setIdentity();\n\n      _vec3_1.setX(details.positiona.x);\n      _vec3_1.setY(details.positiona.y);\n      _vec3_1.setZ(details.positiona.z);\n\n      transforma.setOrigin(_vec3_1);\n\n      let rotation = transforma.getRotation();\n      rotation.setEulerZYX(-details.axisa.z, -details.axisa.y, -details.axisa.x);\n      transforma.setRotation(rotation);\n\n      if (details.objectb) {\n        transformb = new Ammo.btTransform();\n        transformb.setIdentity();\n\n        _vec3_2.setX(details.positionb.x);\n        _vec3_2.setY(details.positionb.y);\n        _vec3_2.setZ(details.positionb.z);\n\n        transformb.setOrigin(_vec3_2);\n\n        rotation = transformb.getRotation();\n        rotation.setEulerZYX(-details.axisb.z, -details.axisb.y, -details.axisb.x);\n        transformb.setRotation(rotation);\n\n        constraint = new Ammo.btGeneric6DofConstraint(\n          _objects[details.objecta],\n          _objects[details.objectb],\n          transforma,\n          transformb,\n          true\n        );\n      }\n      else {\n        constraint = new Ammo.btGeneric6DofConstraint(\n          _objects[details.objecta],\n          transforma,\n          true\n        );\n      }\n\n      constraint.ta = transforma;\n      constraint.tb = transformb;\n\n      Ammo.destroy(transforma);\n      if (transformb !== undefined) Ammo.destroy(transformb);\n\n      break;\n    }\n  default:\n    return;\n  }\n\n  world.addConstraint(constraint);\n\n  constraint.a = _objects[details.objecta];\n  constraint.b = _objects[details.objectb];\n\n  constraint.enableFeedback();\n  _constraints[details.id] = constraint;\n  _num_constraints++;\n\n  if (SUPPORT_TRANSFERABLE) {\n    constraintreport = new Float32Array(1 + _num_constraints * CONSTRAINTREPORT_ITEMSIZE); // message id & ( # of objects to report * # of values per object )\n    constraintreport[0] = MESSAGE_TYPES.CONSTRAINTREPORT;\n  }\n  else constraintreport = [MESSAGE_TYPES.CONSTRAINTREPORT];\n};\n\npublic_functions.removeConstraint = (details) => {\n  const constraint = _constraints[details.id];\n\n  if (constraint !== undefined) {\n    world.removeConstraint(constraint);\n    _constraints[details.id] = null;\n    _num_constraints--;\n  }\n};\n\npublic_functions.constraint_setBreakingImpulseThreshold = (details) => {\n  const constraint = _constraints[details.id];\n  if (constraint !== undefined) constraint.setBreakingImpulseThreshold(details.threshold);\n};\n\npublic_functions.simulate = (params = {}) => {\n  if (world) {\n    if (params.timeStep && params.timeStep < fixedTimeStep)\n      params.timeStep = fixedTimeStep;\n\n    params.maxSubSteps = params.maxSubSteps || Math.ceil(params.timeStep / fixedTimeStep); // If maxSubSteps is not defined, keep the simulation fully up to date\n\n    world.stepSimulation(params.timeStep, params.maxSubSteps, fixedTimeStep);\n\n    if (_vehicles.length > 0) reportVehicles();\n    reportCollisions();\n    if (_constraints.length > 0) reportConstraints();\n    reportWorld();\n    if (_softbody_enabled) reportWorld_softbodies();\n  }\n};\n\n// Constraint functions\npublic_functions.hinge_setLimits = (params) => {\n  _constraints[params.constraint].setLimit(params.low, params.high, 0, params.bias_factor, params.relaxation_factor);\n};\n\npublic_functions.hinge_enableAngularMotor = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.enableAngularMotor(true, params.velocity, params.acceleration);\n  constraint.a.activate();\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.hinge_disableMotor = (params) => {\n  _constraints[params.constraint].enableMotor(false);\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.slider_setLimits = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.setLowerLinLimit(params.lin_lower || 0);\n  constraint.setUpperLinLimit(params.lin_upper || 0);\n\n  constraint.setLowerAngLimit(params.ang_lower || 0);\n  constraint.setUpperAngLimit(params.ang_upper || 0);\n};\n\npublic_functions.slider_setRestitution = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.setSoftnessLimLin(params.linear || 0);\n  constraint.setSoftnessLimAng(params.angular || 0);\n};\n\npublic_functions.slider_enableLinearMotor = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.setTargetLinMotorVelocity(params.velocity);\n  constraint.setMaxLinMotorForce(params.acceleration);\n  constraint.setPoweredLinMotor(true);\n  constraint.a.activate();\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.slider_disableLinearMotor = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.setPoweredLinMotor(false);\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.slider_enableAngularMotor = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.setTargetAngMotorVelocity(params.velocity);\n  constraint.setMaxAngMotorForce(params.acceleration);\n  constraint.setPoweredAngMotor(true);\n  constraint.a.activate();\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.slider_disableAngularMotor = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.setPoweredAngMotor(false);\n  constraint.a.activate();\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.conetwist_setLimit = (params) => {\n  _constraints[params.constraint].setLimit(params.z, params.y, params.x); // ZYX order\n};\n\npublic_functions.conetwist_enableMotor = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.enableMotor(true);\n  constraint.a.activate();\n  constraint.b.activate();\n};\n\npublic_functions.conetwist_setMaxMotorImpulse = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.setMaxMotorImpulse(params.max_impulse);\n  constraint.a.activate();\n  constraint.b.activate();\n};\n\npublic_functions.conetwist_setMotorTarget = (params) => {\n  const constraint = _constraints[params.constraint];\n\n  _quat.setX(params.x);\n  _quat.setY(params.y);\n  _quat.setZ(params.z);\n  _quat.setW(params.w);\n\n  constraint.setMotorTarget(_quat);\n\n  constraint.a.activate();\n  constraint.b.activate();\n};\n\npublic_functions.conetwist_disableMotor = (params) => {\n  const constraint = _constraints[params.constraint];\n  constraint.enableMotor(false);\n  constraint.a.activate();\n  constraint.b.activate();\n};\n\npublic_functions.dof_setLinearLowerLimit = (params) => {\n  const constraint = _constraints[params.constraint];\n\n  _vec3_1.setX(params.x);\n  _vec3_1.setY(params.y);\n  _vec3_1.setZ(params.z);\n\n  constraint.setLinearLowerLimit(_vec3_1);\n  constraint.a.activate();\n\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.dof_setLinearUpperLimit = (params) => {\n  const constraint = _constraints[params.constraint];\n\n  _vec3_1.setX(params.x);\n  _vec3_1.setY(params.y);\n  _vec3_1.setZ(params.z);\n\n  constraint.setLinearUpperLimit(_vec3_1);\n  constraint.a.activate();\n\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.dof_setAngularLowerLimit = (params) => {\n  const constraint = _constraints[params.constraint];\n\n  _vec3_1.setX(params.x);\n  _vec3_1.setY(params.y);\n  _vec3_1.setZ(params.z);\n\n  constraint.setAngularLowerLimit(_vec3_1);\n  constraint.a.activate();\n\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.dof_setAngularUpperLimit = (params) => {\n  const constraint = _constraints[params.constraint];\n\n  _vec3_1.setX(params.x);\n  _vec3_1.setY(params.y);\n  _vec3_1.setZ(params.z);\n\n  constraint.setAngularUpperLimit(_vec3_1);\n  constraint.a.activate();\n\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.dof_enableAngularMotor = (params) => {\n  const constraint = _constraints[params.constraint];\n\n  const motor = constraint.getRotationalLimitMotor(params.which);\n  motor.set_m_enableMotor(true);\n  constraint.a.activate();\n\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.dof_configureAngularMotor = (params) => {\n  const constraint = _constraints[params.constraint],\n    motor = constraint.getRotationalLimitMotor(params.which);\n\n  motor.set_m_loLimit(params.low_angle);\n  motor.set_m_hiLimit(params.high_angle);\n  motor.set_m_targetVelocity(params.velocity);\n  motor.set_m_maxMotorForce(params.max_force);\n  constraint.a.activate();\n\n  if (constraint.b) constraint.b.activate();\n};\n\npublic_functions.dof_disableAngularMotor = (params) => {\n  const constraint = _constraints[params.constraint],\n    motor = constraint.getRotationalLimitMotor(params.which);\n\n  motor.set_m_enableMotor(false);\n  constraint.a.activate();\n\n  if (constraint.b) constraint.b.activate();\n};\n\nconst reportWorld = () => {\n  if (SUPPORT_TRANSFERABLE && worldreport.length < 2 + _num_rigidbody_objects * WORLDREPORT_ITEMSIZE) {\n    worldreport = new Float32Array(\n      2 // message id & # objects in report\n      +\n      (Math.ceil(_num_rigidbody_objects / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * WORLDREPORT_ITEMSIZE // # of values needed * item size\n    );\n\n    worldreport[0] = MESSAGE_TYPES.WORLDREPORT;\n  }\n\n  worldreport[1] = _num_rigidbody_objects; // record how many objects we're reporting on\n\n  {\n    let i = 0,\n      index = _objects.length;\n\n    while (index--) {\n      const object = _objects[index];\n\n      if (object && object.type === 1) { // RigidBodies.\n        // #TODO: we can't use center of mass transform when center of mass can change,\n        //        but getMotionState().getWorldTransform() screws up on objects that have been moved\n        // object.getMotionState().getWorldTransform( transform );\n        // object.getMotionState().getWorldTransform(_transform);\n\n        const transform = object.getCenterOfMassTransform();\n        const origin = transform.getOrigin();\n        const rotation = transform.getRotation();\n\n        // add values to report\n        const offset = 2 + (i++) * WORLDREPORT_ITEMSIZE;\n\n        worldreport[offset] = object.id;\n\n        worldreport[offset + 1] = origin.x();\n        worldreport[offset + 2] = origin.y();\n        worldreport[offset + 3] = origin.z();\n\n        worldreport[offset + 4] = rotation.x();\n        worldreport[offset + 5] = rotation.y();\n        worldreport[offset + 6] = rotation.z();\n        worldreport[offset + 7] = rotation.w();\n\n        _vector = object.getLinearVelocity();\n        worldreport[offset + 8] = _vector.x();\n        worldreport[offset + 9] = _vector.y();\n        worldreport[offset + 10] = _vector.z();\n\n        _vector = object.getAngularVelocity();\n        worldreport[offset + 11] = _vector.x();\n        worldreport[offset + 12] = _vector.y();\n        worldreport[offset + 13] = _vector.z();\n      }\n    }\n  }\n\n  if (SUPPORT_TRANSFERABLE) send(worldreport.buffer, [worldreport.buffer]);\n  else send(worldreport);\n};\n\nconst reportWorld_softbodies = () => {\n  // TODO: Add SUPPORTTRANSFERABLE.\n\n  softreport = new Float32Array(\n    2 // message id & # objects in report\n    +\n    _num_softbody_objects * 2 +\n    _softbody_report_size * 6\n  );\n\n  softreport[0] = MESSAGE_TYPES.SOFTREPORT;\n  softreport[1] = _num_softbody_objects; // record how many objects we're reporting on\n\n  {\n    let offset = 2,\n      index = _objects.length;\n\n    while (index--) {\n      const object = _objects[index];\n\n      if (object && object.type === 0) { // SoftBodies.\n\n        softreport[offset] = object.id;\n\n        const offsetVert = offset + 2;\n\n        if (object.rope === true) {\n          const nodes = object.get_m_nodes();\n          const size = nodes.size();\n          softreport[offset + 1] = size;\n\n          for (let i = 0; i < size; i++) {\n            const node = nodes.at(i);\n            const vert = node.get_m_x();\n            const off = offsetVert + i * 3;\n\n            softreport[off] = vert.x();\n            softreport[off + 1] = vert.y();\n            softreport[off + 2] = vert.z();\n          }\n\n          offset += size * 3 + 2;\n        }\n        else if (object.cloth) {\n          const nodes = object.get_m_nodes();\n          const size = nodes.size();\n          softreport[offset + 1] = size;\n\n          for (let i = 0; i < size; i++) {\n            const node = nodes.at(i);\n            const vert = node.get_m_x();\n            const normal = node.get_m_n();\n            const off = offsetVert + i * 6;\n\n            softreport[off] = vert.x();\n            softreport[off + 1] = vert.y();\n            softreport[off + 2] = vert.z();\n\n            softreport[off + 3] = -normal.x();\n            softreport[off + 4] = -normal.y();\n            softreport[off + 5] = -normal.z();\n          }\n\n          offset += size * 6 + 2;\n        }\n        else {\n          const faces = object.get_m_faces();\n          const size = faces.size();\n          softreport[offset + 1] = size;\n\n          for (let i = 0; i < size; i++) {\n            const face = faces.at(i);\n\n            const node1 = face.get_m_n(0);\n            const node2 = face.get_m_n(1);\n            const node3 = face.get_m_n(2);\n\n            const vert1 = node1.get_m_x();\n            const vert2 = node2.get_m_x();\n            const vert3 = node3.get_m_x();\n\n            const normal1 = node1.get_m_n();\n            const normal2 = node2.get_m_n();\n            const normal3 = node3.get_m_n();\n\n            const off = offsetVert + i * 18;\n\n            softreport[off] = vert1.x();\n            softreport[off + 1] = vert1.y();\n            softreport[off + 2] = vert1.z();\n\n            softreport[off + 3] = normal1.x();\n            softreport[off + 4] = normal1.y();\n            softreport[off + 5] = normal1.z();\n\n            softreport[off + 6] = vert2.x();\n            softreport[off + 7] = vert2.y();\n            softreport[off + 8] = vert2.z();\n\n            softreport[off + 9] = normal2.x();\n            softreport[off + 10] = normal2.y();\n            softreport[off + 11] = normal2.z();\n\n            softreport[off + 12] = vert3.x();\n            softreport[off + 13] = vert3.y();\n            softreport[off + 14] = vert3.z();\n\n            softreport[off + 15] = normal3.x();\n            softreport[off + 16] = normal3.y();\n            softreport[off + 17] = normal3.z();\n          }\n\n          offset += size * 18 + 2;\n        }\n      }\n    }\n  }\n\n  // if (SUPPORT_TRANSFERABLE) send(softreport.buffer, [softreport.buffer]);\n  // else send(softreport);\n  send(softreport);\n};\n\nconst reportCollisions = () => {\n  const dp = world.getDispatcher(),\n    num = dp.getNumManifolds();\n  // _collided = false;\n\n  if (SUPPORT_TRANSFERABLE) {\n    if (collisionreport.length < 2 + num * COLLISIONREPORT_ITEMSIZE) {\n      collisionreport = new Float32Array(\n        2 // message id & # objects in report\n        +\n        (Math.ceil(_num_objects / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * COLLISIONREPORT_ITEMSIZE // # of values needed * item size\n      );\n      collisionreport[0] = MESSAGE_TYPES.COLLISIONREPORT;\n    }\n  }\n\n  collisionreport[1] = 0; // how many collisions we're reporting on\n\n  for (let i = 0; i < num; i++) {\n    const manifold = dp.getManifoldByIndexInternal(i),\n      num_contacts = manifold.getNumContacts();\n\n    if (num_contacts === 0) continue;\n\n    for (let j = 0; j < num_contacts; j++) {\n      const pt = manifold.getContactPoint(j);\n\n      // if ( pt.getDistance() < 0 ) {\n      const offset = 2 + (collisionreport[1]++) * COLLISIONREPORT_ITEMSIZE;\n      collisionreport[offset] = _objects_ammo[manifold.getBody0().ptr];\n      collisionreport[offset + 1] = _objects_ammo[manifold.getBody1().ptr];\n\n      _vector = pt.get_m_normalWorldOnB();\n      collisionreport[offset + 2] = _vector.x();\n      collisionreport[offset + 3] = _vector.y();\n      collisionreport[offset + 4] = _vector.z();\n      break;\n      // }\n      // send(_objects_ammo);\n    }\n  }\n\n  if (SUPPORT_TRANSFERABLE) send(collisionreport.buffer, [collisionreport.buffer]);\n  else send(collisionreport);\n};\n\nconst reportVehicles = function () {\n  if (SUPPORT_TRANSFERABLE) {\n    if (vehiclereport.length < 2 + _num_wheels * VEHICLEREPORT_ITEMSIZE) {\n      vehiclereport = new Float32Array(\n        2 // message id & # objects in report\n        +\n        (Math.ceil(_num_wheels / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * VEHICLEREPORT_ITEMSIZE // # of values needed * item size\n      );\n      vehiclereport[0] = MESSAGE_TYPES.VEHICLEREPORT;\n    }\n  }\n\n  {\n    let i = 0,\n      j = 0,\n      index = _vehicles.length;\n\n    while (index--) {\n      if (_vehicles[index]) {\n        const vehicle = _vehicles[index];\n\n        for (j = 0; j < vehicle.getNumWheels(); j++) {\n          // vehicle.updateWheelTransform( j, true );\n          // transform = vehicle.getWheelTransformWS( j );\n          const transform = vehicle.getWheelInfo(j).get_m_worldTransform();\n\n          const origin = transform.getOrigin();\n          const rotation = transform.getRotation();\n\n          // add values to report\n          const offset = 1 + (i++) * VEHICLEREPORT_ITEMSIZE;\n\n          vehiclereport[offset] = index;\n          vehiclereport[offset + 1] = j;\n\n          vehiclereport[offset + 2] = origin.x();\n          vehiclereport[offset + 3] = origin.y();\n          vehiclereport[offset + 4] = origin.z();\n\n          vehiclereport[offset + 5] = rotation.x();\n          vehiclereport[offset + 6] = rotation.y();\n          vehiclereport[offset + 7] = rotation.z();\n          vehiclereport[offset + 8] = rotation.w();\n        }\n      }\n    }\n\n    if (SUPPORT_TRANSFERABLE && j !== 0) send(vehiclereport.buffer, [vehiclereport.buffer]);\n    else if (j !== 0) send(vehiclereport);\n  }\n};\n\nconst reportConstraints = function () {\n  if (SUPPORT_TRANSFERABLE) {\n    if (constraintreport.length < 2 + _num_constraints * CONSTRAINTREPORT_ITEMSIZE) {\n      constraintreport = new Float32Array(\n        2 // message id & # objects in report\n        +\n        (Math.ceil(_num_constraints / REPORT_CHUNKSIZE) * REPORT_CHUNKSIZE) * CONSTRAINTREPORT_ITEMSIZE // # of values needed * item size\n      );\n      constraintreport[0] = MESSAGE_TYPES.CONSTRAINTREPORT;\n    }\n  }\n\n  {\n    let offset = 0,\n      i = 0,\n      index = _constraints.lenght;\n\n    while (index--) {\n      if (_constraints[index]) {\n        const constraint = _constraints[index];\n        const offset_body = constraint.a;\n        const transform = constraint.ta;\n        const origin = transform.getOrigin();\n\n        // add values to report\n        offset = 1 + (i++) * CONSTRAINTREPORT_ITEMSIZE;\n\n        constraintreport[offset] = index;\n        constraintreport[offset + 1] = offset_body.id;\n        constraintreport[offset + 2] = origin.x;\n        constraintreport[offset + 3] = origin.y;\n        constraintreport[offset + 4] = origin.z;\n        constraintreport[offset + 5] = constraint.getBreakingImpulseThreshold();\n      }\n    }\n\n    if (SUPPORT_TRANSFERABLE && i !== 0) send(constraintreport.buffer, [constraintreport.buffer]);\n    else if (i !== 0) send(constraintreport);\n  }\n};\n\nself.onmessage = function (event) {\n  if (event.data instanceof Float32Array) {\n    // transferable object\n    switch (event.data[0]) {\n    case MESSAGE_TYPES.WORLDREPORT:\n      {\n        worldreport = new Float32Array(event.data);\n        break;\n      }\n    case MESSAGE_TYPES.COLLISIONREPORT:\n      {\n        collisionreport = new Float32Array(event.data);\n        break;\n      }\n    case MESSAGE_TYPES.VEHICLEREPORT:\n      {\n        vehiclereport = new Float32Array(event.data);\n        break;\n      }\n    case MESSAGE_TYPES.CONSTRAINTREPORT:\n      {\n        constraintreport = new Float32Array(event.data);\n        break;\n      }\n    default:\n    }\n\n    return;\n  }\n  else if (event.data.cmd && public_functions[event.data.cmd]) public_functions[event.data.cmd](event.data.params);\n};\n\nself.receive = self.onmessage;\n\n\n\n\n});","import WorldModuleBase from './core/WorldModuleBase';\n\nimport {\n  addObjectChildren,\n  MESSAGE_TYPES,\n  temp1Vector3,\n  temp1Matrix4,\n  REPORT_ITEMSIZE,\n  COLLISIONREPORT_ITEMSIZE,\n  VEHICLEREPORT_ITEMSIZE,\n  CONSTRAINTREPORT_ITEMSIZE\n} from '../api';\n\nimport PhysicsWorker from 'worker!../worker.js';\n\nexport class WorldModule extends WorldModuleBase {\n  constructor(...args) {\n    super(...args);\n\n    this.worker = new PhysicsWorker();\n    this.worker.transferableMessage = this.worker.webkitPostMessage || this.worker.postMessage;\n\n    this.isLoaded = false;\n\n    const options = this.options;\n\n    this.loader = new Promise((resolve, reject) => {\n      // if (options.wasm) {\n      //   fetch(options.wasm)\n      //     .then(response => response.arrayBuffer())\n      //     .then(buffer => {\n      //       options.wasmBuffer = buffer;\n      //\n      //       this.execute('init', options);\n      //       resolve();\n      //     });\n      // } else {\n        this.execute('init', options);\n        resolve();\n      // }\n    });\n\n    this.loader.then(() => {this.isLoaded = true});\n\n    // Test SUPPORT_TRANSFERABLE\n\n    const ab = new ArrayBuffer(1);\n    this.worker.transferableMessage(ab, [ab]);\n    this.SUPPORT_TRANSFERABLE = (ab.byteLength === 0);\n\n    this.setup();\n  }\n\n  send(...args) {\n    this.worker.transferableMessage(...args);\n  }\n\n  receive(callback) {\n    this.worker.addEventListener('message', callback);\n  }\n}\n","import {Vector3, Quaternion} from 'three';\n\nconst properties = {\n  position: {\n    get() {\n      return this._native.position;\n    },\n\n    set(vector3) {\n      const pos = this._native.position;\n      const scope = this;\n\n      Object.defineProperties(pos, {\n        x: {\n          get() {\n            return this._x;\n          },\n\n          set(x) {\n            scope.__dirtyPosition = true;\n            this._x = x;\n          }\n        },\n        y: {\n          get() {\n            return this._y;\n          },\n\n          set(y) {\n            scope.__dirtyPosition = true;\n            this._y = y;\n          }\n        },\n        z: {\n          get() {\n            return this._z;\n          },\n\n          set(z) {\n            scope.__dirtyPosition = true;\n            this._z = z;\n          }\n        }\n      });\n\n      scope.__dirtyPosition = true;\n\n      pos.copy(vector3);\n    }\n  },\n\n  quaternion: {\n    get() {\n      this.__c_rot = true;\n      return this.native.quaternion;\n    },\n\n    set(quaternion) {\n      const quat = this._native.quaternion,\n        native = this._native;\n\n      quat.copy(quaternion);\n\n      quat.onChange(() => {\n        if (this.__c_rot) {\n          if (native.__dirtyRotation === true) {\n            this.__c_rot = false;\n            native.__dirtyRotation = false;\n          }\n          native.__dirtyRotation = true;\n        }\n      });\n    }\n  },\n\n  rotation: {\n    get() {\n      this.__c_rot = true;\n      return this._native.rotation;\n    },\n\n    set(euler) {\n      const rot = this._native.rotation,\n        native = this._native;\n\n      this.quaternion.copy(new Quaternion().setFromEuler(euler));\n\n      rot.onChange(() => {\n        if (this.__c_rot) {\n          this.quaternion.copy(new Quaternion().setFromEuler(rot));\n          native.__dirtyRotation = true;\n        }\n      });\n    }\n  }\n}\n\nfunction wrapPhysicsPrototype(scope) {\n  for (let key in properties) {\n    Object.defineProperty(scope, key, {\n      get: properties[key].get.bind(scope),\n      set: properties[key].set.bind(scope),\n      configurable: true,\n      enumerable: true\n    });\n  }\n}\n\nfunction onCopy(source) {\n  wrapPhysicsPrototype(this);\n\n  const physics = this.use('physics');\n  const sourcePhysics = source.use('physics');\n\n  this.manager.modules.physics = physics.clone(this.manager);\n\n  physics.data = {...sourcePhysics.data};\n  physics.data.isSoftBodyReset = false;\n  if (physics.data.isSoftbody) physics.data.isSoftBodyReset = false;\n\n  this.position = this.position.clone();\n  this.rotation = this.rotation.clone();\n  this.quaternion = this.quaternion.clone();\n\n  return source;\n}\n\nfunction onWrap() {\n  this.position = this.position.clone();\n  this.rotation = this.rotation.clone();\n  this.quaternion = this.quaternion.clone();\n}\n\nclass API {\n  applyCentralImpulse(force) {\n    this.execute('applyCentralImpulse', {id: this.data.id, x: force.x, y: force.y, z: force.z});\n  }\n\n  applyImpulse(force, offset) {\n    this.execute('applyImpulse', {\n      id: this.data.id,\n      impulse_x: force.x,\n      impulse_y: force.y,\n      impulse_z: force.z,\n      x: offset.x,\n      y: offset.y,\n      z: offset.z\n    });\n  }\n\n  applyTorque(force) {\n    this.execute('applyTorque', {\n      id: this.data.id,\n      torque_x: force.x,\n      torque_y: force.y,\n      torque_z: force.z\n    });\n  }\n\n  applyCentralForce(force) {\n    this.execute('applyCentralForce', {\n      id: this.data.id,\n      x: force.x,\n      y: force.y,\n      z: force.z\n    });\n  }\n\n  applyForce(force, offset) {\n    this.execute('applyForce', {\n      id: this.data.id,\n      force_x: force.x,\n      force_y: force.y,\n      force_z: force.z,\n      x: offset.x,\n      y: offset.y,\n      z: offset.z\n    });\n  }\n\n  getAngularVelocity() {\n    return this.data.angularVelocity;\n  }\n\n  setAngularVelocity(velocity) {\n    this.execute(\n      'setAngularVelocity',\n      {id: this.data.id, x: velocity.x, y: velocity.y, z: velocity.z}\n    );\n  }\n\n  getLinearVelocity() {\n    return this.data.linearVelocity;\n  }\n\n  setLinearVelocity(velocity) {\n    this.execute(\n      'setLinearVelocity',\n      {id: this.data.id, x: velocity.x, y: velocity.y, z: velocity.z}\n    );\n  }\n\n  setAngularFactor(factor) {\n    this.execute(\n      'setAngularFactor',\n      {id: this.data.id, x: factor.x, y: factor.y, z: factor.z}\n    );\n  }\n\n  setLinearFactor(factor) {\n    this.execute(\n      'setLinearFactor',\n      {id: this.data.id, x: factor.x, y: factor.y, z: factor.z}\n    );\n  }\n\n  setDamping(linear, angular) {\n    this.execute(\n      'setDamping',\n      {id: this.data.id, linear, angular}\n    );\n  }\n\n  setCcdMotionThreshold(threshold) {\n    this.execute(\n      'setCcdMotionThreshold',\n      {id: this.data.id, threshold}\n    );\n  }\n\n  setCcdSweptSphereRadius(radius) {\n    this.execute('setCcdSweptSphereRadius', {id: this.data.id, radius});\n  }\n}\n\nexport default class extends API {\n  static rigidbody = () => ({\n    touches: [],\n    linearVelocity: new Vector3(),\n    angularVelocity: new Vector3(),\n    mass: 10,\n    scale: new Vector3(1, 1, 1),\n    restitution: 0.3,\n    friction: 0.8,\n    damping: 0,\n    margin: 0\n  });\n\n  static softbody = () => ({\n    touches: [],\n    restitution: 0.3,\n    friction: 0.8,\n    damping: 0,\n    scale: new Vector3(1, 1, 1),\n    pressure: 100,\n    margin: 0,\n    klst: 0.9,\n    kvst: 0.9,\n    kast: 0.9,\n    piterations: 1,\n    viterations: 0,\n    diterations: 0,\n    citerations: 4,\n    anchorHardness: 0.7,\n    rigidHardness: 1,\n    isSoftbody: true,\n    isSoftBodyReset: false\n  });\n\n  static rope = () => ({\n    touches: [],\n    friction: 0.8,\n    scale: new Vector3(1, 1, 1),\n    damping: 0,\n    margin: 0,\n    klst: 0.9,\n    kvst: 0.9,\n    kast: 0.9,\n    piterations: 1,\n    viterations: 0,\n    diterations: 0,\n    citerations: 4,\n    anchorHardness: 0.7,\n    rigidHardness: 1,\n    isSoftbody: true\n  });\n\n  static cloth = () => ({\n    touches: [],\n    friction: 0.8,\n    damping: 0,\n    margin: 0,\n    scale: new Vector3(1, 1, 1),\n    klst: 0.9,\n    kvst: 0.9,\n    kast: 0.9,\n    piterations: 1,\n    viterations: 0,\n    diterations: 0,\n    citerations: 4,\n    anchorHardness: 0.7,\n    rigidHardness: 1\n  });\n\n  constructor(defaults, data) {\n    super();\n    this.data = Object.assign(defaults, data);\n  }\n\n  integrate(self) {\n    wrapPhysicsPrototype(this);\n  }\n\n  manager(manager) {\n    manager.define('physics');\n\n    this.execute = (...data) => {\n      return manager.has('module:world')\n      ? manager.get('module:world').execute(...data)\n      : () => {};\n    };\n  }\n\n  updateData(callback) {\n    this.bridge.geometry = function (geometry, module) {\n      if (!callback) return geometry;\n\n      const result = callback(geometry, module);\n      return result ? result : geometry;\n    }\n  }\n\n  clone(manager) {\n    const clone = new this.constructor();\n    clone.data = {...this.data};\n    clone.bridge.geometry = this.bridge.geometry;\n    this.manager.apply(clone, [manager]);\n\n    return clone;\n  }\n\n  bridge = {\n    onCopy,\n    onWrap\n  };\n}\n","import PhysicsModule from './core/PhysicsModule';\n\nexport class BoxModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'box',\n      ...PhysicsModule.rigidbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      if (!geometry.boundingBox) geometry.computeBoundingBox();\n\n      data.width = data.width || geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      data.height = data.height || geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      data.depth = data.depth || geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n    });\n  }\n}\n","import PhysicsModule from './core/PhysicsModule';\n\nexport class CompoundModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'compound',\n      ...PhysicsModule.rigidbody()\n    }, params);\n  }\n}\n","import PhysicsModule from './core/PhysicsModule';\n\n// TODO: Test CapsuleModule in action.\nexport class CapsuleModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'capsule',\n      ...PhysicsModule.rigidbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      if (!geometry.boundingBox) geometry.computeBoundingBox();\n\n      data.width = data.width || geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      data.height = data.height || geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      data.depth = data.depth || geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n    });\n  }\n}\n","import PhysicsModule from './core/PhysicsModule';\n\nexport class ConcaveModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'concave',\n      ...PhysicsModule.rigidbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      data.data = this.geometryProcessor(geometry);\n    });\n  }\n\n  geometryProcessor(geometry) {\n    if (!geometry.boundingBox) geometry.computeBoundingBox();\n\n    const data = geometry.isBufferGeometry ?\n      geometry.attributes.position.array :\n      new Float32Array(geometry.faces.length * 9);\n\n    if (!geometry.isBufferGeometry) {\n      const vertices = geometry.vertices;\n\n      for (let i = 0; i < geometry.faces.length; i++) {\n        const face = geometry.faces[i];\n\n        const vA = vertices[face.a];\n        const vB = vertices[face.b];\n        const vC = vertices[face.c];\n\n        const i9 = i * 9;\n\n        data[i9] = vA.x;\n        data[i9 + 1] = vA.y;\n        data[i9 + 2] = vA.z;\n\n        data[i9 + 3] = vB.x;\n        data[i9 + 4] = vB.y;\n        data[i9 + 5] = vB.z;\n\n        data[i9 + 6] = vC.x;\n        data[i9 + 7] = vC.y;\n        data[i9 + 8] = vC.z;\n      }\n    }\n\n    return data;\n  };\n}\n","import PhysicsModule from './core/PhysicsModule';\n\nexport class ConeModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'cone',\n      ...PhysicsModule.rigidbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      if (!geometry.boundingBox) geometry.computeBoundingBox();\n\n      data.radius = data.radius || (geometry.boundingBox.max.x - geometry.boundingBox.min.x) / 2;\n      data.height = data.height || geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n    });\n  }\n}\n","import {BufferGeometry} from 'three';\nimport PhysicsModule from './core/PhysicsModule';\n\nexport class ConvexModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'convex',\n      ...PhysicsModule.rigidbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      if (!geometry.boundingBox) geometry.computeBoundingBox();\n      if (!geometry.isBufferGeometry) geometry._bufferGeometry = new BufferGeometry().fromGeometry(geometry);\n\n      data.data = geometry.isBufferGeometry ?\n        geometry.attributes.position.array :\n        geometry._bufferGeometry.attributes.position.array;\n    });\n  }\n}\n","import PhysicsModule from './core/PhysicsModule';\n\nexport class CylinderModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'cylinder',\n      ...PhysicsModule.rigidbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      if (!geometry.boundingBox) geometry.computeBoundingBox();\n\n      data.width = data.width || geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      data.height = data.height || geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      data.depth = data.depth || geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n    });\n  }\n}\n","import PhysicsModule from './core/PhysicsModule';\nimport {Vector3, Vector2, BufferGeometry} from 'three';\n\nexport class HeightfieldModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'heightfield',\n      size: new Vector2(1, 1),\n      autoAlign: false,\n      ...PhysicsModule.rigidbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      const {x: xdiv, y: ydiv} = data.size;\n      const verts = geometry.isBufferGeometry ? geometry.attributes.position.array : geometry.vertices;\n      let size = geometry.isBufferGeometry ? verts.length / 3 : verts.length;\n\n      if (!geometry.boundingBox) geometry.computeBoundingBox();\n\n      const xsize = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      const ysize = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n      data.xpts = (typeof xdiv === 'undefined') ? Math.sqrt(size) : xdiv + 1;\n      data.ypts = (typeof ydiv === 'undefined') ? Math.sqrt(size) : ydiv + 1;\n\n      // note - this assumes our plane geometry is square, unless we pass in specific xdiv and ydiv\n      data.absMaxHeight = Math.max(geometry.boundingBox.max.y, Math.abs(geometry.boundingBox.min.y));\n\n      const points = new Float32Array(size),\n        xpts = data.xpts,\n        ypts = data.ypts;\n\n      while (size--) {\n        const vNum = size % xpts + ((ypts - Math.round((size / xpts) - ((size % xpts) / xpts)) - 1) * ypts);\n\n        if (geometry.isBufferGeometry) points[size] = verts[vNum * 3 + 1];\n        else points[size] = verts[vNum].y;\n      }\n\n      data.points = points;\n\n      data.scale.multiply(\n        new Vector3(xsize / (xpts - 1), 1, ysize / (ypts - 1))\n      );\n\n      if (data.autoAlign) geometry.translate(xsize / -2, 0, ysize / -2);\n    });\n  }\n}\n","import PhysicsModule from './core/PhysicsModule';\n\nexport class PlaneModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'plane',\n      ...PhysicsModule.rigidbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      if (!geometry.boundingBox) geometry.computeBoundingBox();\n\n      data.width = data.width || geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      data.height = data.height || geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      data.normal = data.normal || geometry.faces[0].normal.clone();\n    });\n  }\n}\n","import PhysicsModule from './core/PhysicsModule';\n\nexport class SphereModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'sphere',\n      ...PhysicsModule.rigidbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      if (!geometry.boundingSphere) geometry.computeBoundingSphere();\n      data.radius = data.radius || geometry.boundingSphere.radius;\n    });\n  }\n}\n","import {BufferGeometry, BufferAttribute} from 'three';\nimport PhysicsModule from './core/PhysicsModule';\n\nexport class SoftbodyModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'softTrimesh',\n      ...PhysicsModule.softbody()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      const idxGeometry = geometry.isBufferGeometry\n        ? geometry\n        : (() => {\n          geometry.mergeVertices();\n\n          const bufferGeometry = new BufferGeometry();\n\n          bufferGeometry.addAttribute(\n            'position',\n            new BufferAttribute(\n              new Float32Array(geometry.vertices.length * 3),\n              3\n            ).copyVector3sArray(geometry.vertices)\n          );\n\n          bufferGeometry.setIndex(\n            new BufferAttribute(\n              new (geometry.faces.length * 3 > 65535 ? Uint32Array : Uint16Array)(geometry.faces.length * 3),\n              1\n            ).copyIndicesArray(geometry.faces)\n          );\n\n          return bufferGeometry;\n        })();\n\n      data.aVertices = idxGeometry.attributes.position.array;\n      data.aIndices = idxGeometry.index.array;\n\n      return new BufferGeometry().fromGeometry(geometry);\n    });\n  }\n\n  appendAnchor(object, node, influence = 1, collisionBetweenLinkedBodies = true) {\n    const o1 = this.data.id;\n    const o2 = object.use('physics').data.id;\n\n    this.execute('appendAnchor', {\n      obj: o1,\n      obj2: o2,\n      node,\n      influence,\n      collisionBetweenLinkedBodies\n    });\n  }\n}\n","import {BufferGeometry, BufferAttribute} from 'three';\nimport PhysicsModule from './core/PhysicsModule';\n\nfunction arrayMax(array) {\n\tif (array.length === 0) return - Infinity;\n\n\tvar max = array[0];\n\n\tfor (let i = 1, l = array.length; i < l; ++ i ) {\n\t\tif (array[ i ] > max) max = array[i];\n\t}\n\n\treturn max;\n}\n\nexport class ClothModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'softClothMesh',\n      ...PhysicsModule.cloth()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      const geomParams = geometry.parameters;\n\n      const geom = geometry.isBufferGeometry\n        ? geometry\n          : (() => {\n          geometry.mergeVertices();\n\n          const bufferGeometry = new BufferGeometry();\n\n          bufferGeometry.addAttribute(\n            'position',\n            new BufferAttribute(\n              new Float32Array(geometry.vertices.length * 3),\n              3\n            ).copyVector3sArray(geometry.vertices)\n          );\n\n\t\t\t\t\tconst faces = geometry.faces, facesLength = faces.length, uvs = geometry.faceVertexUvs[0];\n\n          const normalsArray = new Float32Array(facesLength * 3);\n          // const uvsArray = new Array(geometry.vertices.length * 2);\n          const uvsArray = new Float32Array(facesLength * 2);\n          const uvsReplacedArray = new Float32Array(facesLength * 6);\n\t\t\t\t\tconst faceArray = new Uint32Array(facesLength * 3);\n\n          for (let i = 0; i < facesLength; i++) {\n            const i3 = i * 3;\n            const i6 = i * 6;\n            const normal = faces[i].normal || new Vector3();\n\n\t\t\t\t\t\tfaceArray[i3] = faces[i].a;\n            faceArray[i3 + 1] = faces[i].b;\n            faceArray[i3 + 2] = faces[i].c;\n\n            normalsArray[i3] = normal.x;\n            normalsArray[i3 + 1] = normal.y;\n            normalsArray[i3 + 2] = normal.z;\n\n            uvsArray[faces[i].a * 2 + 0] = uvs[i][0].x; // a\n            uvsArray[faces[i].a * 2 + 1] = uvs[i][0].y;\n\n            uvsArray[faces[i].b * 2 + 0] = uvs[i][1].x; // b\n            uvsArray[faces[i].b * 2 + 1] = uvs[i][1].y;\n\n            uvsArray[faces[i].c * 2 + 0] = uvs[i][2].x; // c\n            uvsArray[faces[i].c * 2 + 1] = uvs[i][2].y;\n          }\n\n          bufferGeometry.addAttribute(\n            'normal',\n            new BufferAttribute(\n              normalsArray,\n              3\n            )\n          );\n\n          bufferGeometry.addAttribute(\n            'uv',\n            new BufferAttribute(\n              uvsArray,\n              2\n            )\n          );\n\n\t\t\t\t\tbufferGeometry.setIndex(\n            new BufferAttribute(\n              new (arrayMax(faces) * 3 > 65535 ? Uint32Array : Uint16Array)(facesLength * 3),\n              1\n            ).copyIndicesArray(faces)\n          );\n\n          return bufferGeometry;\n        })();\n\n      const verts = geom.attributes.position.array;\n\n      if (!geomParams.widthSegments) geomParams.widthSegments = 1;\n      if (!geomParams.heightSegments) geomParams.heightSegments = 1;\n\n      const idx00 = 0;\n      const idx01 = geomParams.widthSegments;\n      const idx10 = (geomParams.heightSegments + 1) * (geomParams.widthSegments + 1) - (geomParams.widthSegments + 1);\n      const idx11 = verts.length / 3 - 1;\n\n      data.corners = [\n        verts[idx01 * 3], verts[idx01 * 3 + 1], verts[idx01 * 3 + 2], //   ╗\n        verts[idx00 * 3], verts[idx00 * 3 + 1], verts[idx00 * 3 + 2], // ╔\n        verts[idx11 * 3], verts[idx11 * 3 + 1], verts[idx11 * 3 + 2], //       ╝\n        verts[idx10 * 3], verts[idx10 * 3 + 1], verts[idx10 * 3 + 2], //     ╚\n      ];\n\n      data.segments = [geomParams.widthSegments + 1, geomParams.heightSegments + 1];\n\n      return geom;\n    });\n  }\n\n  appendAnchor(object, node, influence, collisionBetweenLinkedBodies = true) {\n    const o1 = this.data.id;\n    const o2 = object.use('physics').data.id;\n\n    this.execute('appendAnchor', {\n      obj: o1,\n      obj2: o2,\n      node,\n      influence,\n      collisionBetweenLinkedBodies\n    });\n  }\n\n\tlinkNodes(object, n1, n2, modifier) {\n    const self = this.data.id;\n    const body = object.use('physics').data.id;\n\n    this.execute('linkNodes', {\n      self,\n\t\t\tbody,\n      n1, // self node\n      n2, // body node\n\t\t\tmodifier\n    });\n  }\n\n  appendLinearJoint(object, specs) {\n    const self = this.data.id;\n    const body = object.use('physics').data.id;\n\n    this.execute('appendLinearJoint', {\n      self,\n      body,\n      specs\n    });\n  }\n}\n","import {BufferGeometry, BufferAttribute, Vector3} from 'three';\nimport PhysicsModule from './core/PhysicsModule';\n\nexport class RopeModule extends PhysicsModule {\n  constructor(params) {\n    super({\n      type: 'softRopeMesh',\n      ...PhysicsModule.rope()\n    }, params);\n\n    this.updateData((geometry, {data}) => {\n      if (!geometry.isBufferGeometry) {\n        geometry = (() => {\n          const buff = new BufferGeometry();\n\n          buff.addAttribute(\n            'position',\n            new BufferAttribute(\n              new Float32Array(geometry.vertices.length * 3),\n              3\n            ).copyVector3sArray(geometry.vertices)\n          );\n\n          return buff;\n        })();\n      }\n\n      const length = geometry.attributes.position.array.length / 3;\n      const vert = n => new Vector3().fromArray(geometry.attributes.position.array, n*3);\n\n      const v1 = vert(0);\n      const v2 = vert(length - 1);\n\n      data.data = [\n        v1.x, v1.y, v1.z,\n        v2.x, v2.y, v2.z,\n        length\n      ];\n\n      return geometry;\n    });\n  }\n\n  appendAnchor(object, node, influence, collisionBetweenLinkedBodies = true) {\n    const o1 = this.data.id;\n    const o2 = object.use('physics').data.id;\n\n    this.execute('appendAnchor', {\n      obj: o1,\n      obj2: o2,\n      node,\n      influence,\n      collisionBetweenLinkedBodies\n    });\n  }\n}\n","import {Loop} from 'whs';\n\nimport {\n  Object3D,\n  Quaternion,\n  Vector3,\n  Euler\n} from 'three';\n\nconst PI_2 = Math.PI / 2;\n\n// TODO: Fix DOM\nfunction FirstPersonControlsSolver(camera, mesh, params) {\n  const velocityFactor = 1;\n  let runVelocity = 0.25;\n\n  mesh.use('physics').setAngularFactor({x: 0, y: 0, z: 0});\n  camera.position.set(0, 0, 0);\n\n  /* Init */\n  const player = mesh,\n    pitchObject = new Object3D();\n\n  pitchObject.add(camera.native);\n\n  const yawObject = new Object3D();\n\n  yawObject.position.y = params.ypos; // eyes are 2 meters above the ground\n  yawObject.add(pitchObject);\n\n  const quat = new Quaternion();\n\n  let canJump = false,\n    // Moves.\n    moveForward = false,\n    moveBackward = false,\n    moveLeft = false,\n    moveRight = false;\n\n  player.on('collision', (otherObject, v, r, contactNormal) => {\n    console.log(contactNormal.y);\n    if (contactNormal.y < 0.5) // Use a \"good\" threshold value between 0 and 1 here!\n      canJump = true;\n  });\n\n  const onMouseMove = event => {\n    if (this.enabled === false) return;\n\n    const movementX = typeof event.movementX === 'number'\n      ? event.movementX : typeof event.mozMovementX === 'number'\n        ? event.mozMovementX : typeof event.getMovementX === 'function'\n          ? event.getMovementX() : 0;\n    const movementY = typeof event.movementY === 'number'\n      ? event.movementY : typeof event.mozMovementY === 'number'\n        ? event.mozMovementY : typeof event.getMovementY === 'function'\n          ? event.getMovementY() : 0;\n\n    yawObject.rotation.y -= movementX * 0.002;\n    pitchObject.rotation.x -= movementY * 0.002;\n\n    pitchObject.rotation.x = Math.max(-PI_2, Math.min(PI_2, pitchObject.rotation.x));\n  };\n\n  const physics = player.use('physics');\n\n  const onKeyDown = event => {\n    switch (event.keyCode) {\n      case 38: // up\n      case 87: // w\n        moveForward = true;\n        break;\n\n      case 37: // left\n      case 65: // a\n        moveLeft = true;\n        break;\n\n      case 40: // down\n      case 83: // s\n        moveBackward = true;\n        break;\n\n      case 39: // right\n      case 68: // d\n        moveRight = true;\n        break;\n\n      case 32: // space\n        console.log(canJump);\n        if (canJump === true) physics.applyCentralImpulse({x: 0, y: 300, z: 0});\n        canJump = false;\n        break;\n\n      case 16: // shift\n        runVelocity = 0.5;\n        break;\n\n      default:\n    }\n  };\n\n  const onKeyUp = event => {\n    switch (event.keyCode) {\n      case 38: // up\n      case 87: // w\n        moveForward = false;\n        break;\n\n      case 37: // left\n      case 65: // a\n        moveLeft = false;\n        break;\n\n      case 40: // down\n      case 83: // a\n        moveBackward = false;\n        break;\n\n      case 39: // right\n      case 68: // d\n        moveRight = false;\n        break;\n\n      case 16: // shift\n        runVelocity = 0.25;\n        break;\n\n      default:\n    }\n  };\n\n  document.body.addEventListener('mousemove', onMouseMove, false);\n  document.body.addEventListener('keydown', onKeyDown, false);\n  document.body.addEventListener('keyup', onKeyUp, false);\n\n  this.enabled = false;\n  this.getObject = () => yawObject;\n\n  this.getDirection = targetVec => {\n    targetVec.set(0, 0, -1);\n    quat.multiplyVector3(targetVec);\n  };\n\n  // Moves the camera to the Physi.js object position\n  // and adds velocity to the object if the run key is down.\n  const inputVelocity = new Vector3(),\n    euler = new Euler();\n\n  this.update = delta => {\n    if (this.enabled === false) return;\n\n    delta = delta || 0.5;\n    delta = Math.min(delta, 0.5, delta);\n\n    inputVelocity.set(0, 0, 0);\n\n    const speed = velocityFactor * delta * params.speed * runVelocity;\n\n    if (moveForward) inputVelocity.z = -speed;\n    if (moveBackward) inputVelocity.z = speed;\n    if (moveLeft) inputVelocity.x = -speed;\n    if (moveRight) inputVelocity.x = speed;\n\n    // Convert velocity to world coordinates\n    euler.x = pitchObject.rotation.x;\n    euler.y = yawObject.rotation.y;\n    euler.order = 'XYZ';\n\n    quat.setFromEuler(euler);\n\n    inputVelocity.applyQuaternion(quat);\n\n    physics.applyCentralImpulse({x: inputVelocity.x, y: 0, z: inputVelocity.z});\n    physics.setAngularVelocity({x: inputVelocity.z, y: 0, z: -inputVelocity.x});\n    physics.setAngularFactor({x: 0, y: 0, z: 0});\n  };\n\n  player.on('physics:added', () => {\n    player.manager.get('module:world').addEventListener('update', () => {\n      if (this.enabled === false) return;\n      yawObject.position.copy(player.position);\n    });\n  });\n}\n\nexport class FirstPersonModule {\n  static defaults = {\n    block: null,\n    speed: 1,\n    ypos: 1\n  };\n\n  constructor(object, params = {}) {\n    this.object = object;\n    this.params = params;\n\n    if (!this.params.block) {\n      this.params.block = document.getElementById('blocker');\n    }\n  }\n\n  manager(manager) {\n    this.controls = new FirstPersonControlsSolver(manager.get('camera'), this.object, this.params);\n\n    if ('pointerLockElement' in document\n      || 'mozPointerLockElement' in document\n      || 'webkitPointerLockElement' in document) {\n      const element = document.body;\n\n      const pointerlockchange = () => {\n        if (document.pointerLockElement === element\n          || document.mozPointerLockElement === element\n          || document.webkitPointerLockElement === element) {\n          this.controls.enabled = true;\n          this.params.block.style.display = 'none';\n        } else {\n          this.controls.enabled = false;\n          this.params.block.style.display = 'block';\n        }\n      };\n\n      document.addEventListener('pointerlockchange', pointerlockchange, false);\n      document.addEventListener('mozpointerlockchange', pointerlockchange, false);\n      document.addEventListener('webkitpointerlockchange', pointerlockchange, false);\n\n      const pointerlockerror = function () {\n        console.warn('Pointer lock error.');\n      };\n\n      document.addEventListener('pointerlockerror', pointerlockerror, false);\n      document.addEventListener('mozpointerlockerror', pointerlockerror, false);\n      document.addEventListener('webkitpointerlockerror', pointerlockerror, false);\n\n      document.querySelector('body').addEventListener('click', () => {\n        element.requestPointerLock = element.requestPointerLock\n          || element.mozRequestPointerLock\n          || element.webkitRequestPointerLock;\n\n        element.requestFullscreen = element.requestFullscreen\n          || element.mozRequestFullscreen\n          || element.mozRequestFullScreen\n          || element.webkitRequestFullscreen;\n\n        if (/Firefox/i.test(navigator.userAgent)) {\n          const fullscreenchange = () => {\n            if (document.fullscreenElement === element\n              || document.mozFullscreenElement === element\n              || document.mozFullScreenElement === element) {\n              document.removeEventListener('fullscreenchange', fullscreenchange);\n              document.removeEventListener('mozfullscreenchange', fullscreenchange);\n\n              element.requestPointerLock();\n            }\n          };\n\n          document.addEventListener('fullscreenchange', fullscreenchange, false);\n          document.addEventListener('mozfullscreenchange', fullscreenchange, false);\n\n          element.requestFullscreen();\n        } else element.requestPointerLock();\n      });\n    } else console.warn('Your browser does not support the PointerLock');\n\n    manager.get('scene').add(this.controls.getObject());\n  }\n\n  integrate(self) {\n    const updateProcessor = c => {\n      self.controls.update(c.getDelta());\n    };\n\n    self.updateLoop = new Loop(updateProcessor).start(this);\n  }\n}\n"],"names":["MESSAGE_TYPES","REPORT_ITEMSIZE","COLLISIONREPORT_ITEMSIZE","VEHICLEREPORT_ITEMSIZE","CONSTRAINTREPORT_ITEMSIZE","temp1Vector3","Vector3","temp2Vector3","temp1Matrix4","Matrix4","temp1Quat","Quaternion","getEulerXYZFromQuaternion","x","y","z","w","Math","atan2","asin","getQuatertionFromEuler","c1","cos","s1","sin","c2","s2","c3","s3","c1c2","s1s2","convertWorldPositionToObject","position","object","identity","makeRotationFromQuaternion","quaternion","getInverse","copy","sub","applyMatrix4","addObjectChildren","parent","i","children","length","child","physics","component","use","data","updateMatrix","updateMatrixWorld","setFromMatrixPosition","matrixWorld","setFromRotationMatrix","position_offset","rotation","push","Eventable","_eventListeners","event_name","callback","hasOwnProperty","index","indexOf","splice","parameters","Array","prototype","call","arguments","apply","obj","addEventListener","removeEventListener","dispatchEvent","ConeTwistConstraint","obja","objb","objecta","objectb","undefined","console","error","type","appliedImpulse","worldModule","id","positiona","clone","positionb","axisa","axisb","execute","constraint","max_impulse","target","THREE","setFromEuler","Euler","HingeConstraint","axis","low","high","bias_factor","relaxation_factor","velocity","acceleration","PointConstraint","SliderConstraint","lin_lower","lin_upper","ang_lower","ang_upper","linear","angular","scene","DOFConstraint","limit","which","low_angle","high_angle","max_force","Vehicle","mesh","tuning","VehicleTuning","wheels","_physijs","getObjectId","suspension_stiffness","suspension_compression","suspension_damping","max_suspension_travel","friction_slip","max_suspension_force","wheel_geometry","wheel_material","connection_point","wheel_direction","wheel_axle","suspension_rest_length","wheel_radius","is_front_wheel","wheel","Mesh","castShadow","receiveShadow","multiplyScalar","add","world","amount","steering","brake","force","WorldModuleBase","options","bridge","self","defer","onAddCallback","bind","onRemoveCallback","Object","assign","defaults","objects","vehicles","constraints","isSimulating","receive","_temp","event","ArrayBuffer","byteLength","Float32Array","WORLDREPORT","updateScene","SOFTREPORT","updateSoftbodies","COLLISIONREPORT","updateCollisions","VEHICLEREPORT","updateVehicles","CONSTRAINTREPORT","updateConstraints","cmd","params","test","debug","dir","info","offset","__dirtyPosition","set","__dirtyRotation","linearVelocity","angularVelocity","SUPPORT_TRANSFERABLE","send","buffer","size","attributes","geometry","volumePositions","array","offsetVert","isSoftBodyReset","volumeNormals","normal","offs","x1","y1","z1","nx1","ny1","nz1","x2","y2","z2","nx2","ny2","nz2","x3","y3","z3","nx3","ny3","nz3","i9","needsUpdate","nx","ny","nz","vehicle","extractRotation","matrix","addVectors","collisions","normal_offsets","object2","id1","j","touches","id2","component2","data2","vel","getLinearVelocity","vel2","subVectors","temp1","temp2","normal_offset","emit","show_marker","getDefinition","marker","SphereGeometry","MeshNormalMaterial","BoxGeometry","native","manager","width","scale","height","depth","remove","pop","func","args","Promise","resolve","isLoaded","loader","then","worker","setFixedTimeStep","fixedTimeStep","setGravity","gravity","addConstraint","simulate","timeStep","maxSubSteps","_stats","begin","object_id","update","pos","isSoftbody","quat","end","simulateLoop","Loop","clock","getDelta","start","TARGET","Symbol","SCRIPT_TYPE","BlobBuilder","window","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","URL","webkitURL","Worker","shimWorker","filename","fn","ShimWorker","forceFallback","o","source","toString","replace","slice","objURL","createSourceObject","revokeObjectURL","selfShim","m","onmessage","postMessage","isThisThread","testWorker","testArray","Uint8Array","navigator","userAgent","Error","e","terminate","str","createObjectURL","Blob","blob","append","getBlob","document","Events","events","empty","on","ctx","off","list","insideWorker","webkitPostMessage","ab","_object","_vector","_transform","_transform_pos","_softbody_enabled","last_simulation_duration","_num_objects","_num_rigidbody_objects","_num_softbody_objects","_num_wheels","_num_constraints","_softbody_report_size","_vec3_1","_vec3_2","_vec3_3","_quat","public_functions","_objects","_vehicles","_constraints","_objects_ammo","_object_shapes","REPORT_CHUNKSIZE","softreport","collisionreport","vehiclereport","constraintreport","WORLDREPORT_ITEMSIZE","getShapeFromCache","cache_key","setShapeCache","shape","createShape","description","setIdentity","Ammo","btCompoundShape","setX","setY","setZ","btStaticPlaneShape","btBoxShape","radius","btSphereShape","btCylinderShape","btCapsuleShape","btConeShape","triangle_mesh","btTriangleMesh","addTriangle","btBvhTriangleMeshShape","btConvexHullShape","addPoint","xpts","ypts","points","ptr","_malloc","p","p2","HEAPF32","btHeightfieldTerrainShape","absMaxHeight","createSoftBody","body","softBodyHelpers","btSoftBodyHelpers","aVertices","CreateFromTriMesh","getWorldInfo","aIndices","cr","corners","CreatePatch","btVector3","segments","CreateRope","init","noWorker","ammo","makeWorld","wasmBuffer","loadAmmoFromBinary","btTransform","btQuaternion","reportsize","collisionConfiguration","softbody","btSoftBodyRigidBodyCollisionConfiguration","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","solver","btSequentialImpulseConstraintSolver","broadphase","aabbmin","aabbmax","btAxisSweep3","btDbvtBroadphase","btSoftRigidDynamicsWorld","btDefaultSoftBodySolver","btDiscreteDynamicsWorld","appendAnchor","node","obj2","collisionBetweenLinkedBodies","influence","linkNodes","self_body","other_body","self_node","get_m_nodes","at","n1","other_node","n2","self_vec","get_m_x","other_vec","force_x","force_y","force_z","cached_distance","linked","_loop","setInterval","distance","sqrt","log","setVelocity","modifer2","max","modifier","addVelocity","appendLink","addForce","appendLinearJoint","specs","Specs","_pos","set_position","erp","set_erp","cfm","set_cfm","split","set_split","addObject","motionState","sbConfig","get_m_cfg","viterations","set_viterations","piterations","set_piterations","diterations","set_diterations","citerations","set_citerations","set_collisions","set_kDF","friction","set_kDP","damping","pressure","set_kPR","drag","set_kDG","lift","set_kLF","anchorHardness","set_kAHR","rigidHardness","set_kCHR","klst","get_m_materials","set_m_kLST","kast","set_m_kAST","kvst","set_m_kVST","castObject","btCollisionObject","getCollisionShape","setMargin","margin","setActivationState","state","rope","cloth","setW","rotate","translate","setTotalMass","mass","addSoftBody","get_m_faces","compound_shape","addChildShape","_child","trans","setOrigin","setRotation","destroy","setLocalScaling","calculateLocalInertia","btDefaultMotionState","rbInfo","btRigidBodyConstructionInfo","set_m_friction","set_m_restitution","restitution","set_m_linearDamping","set_m_angularDamping","btRigidBody","collision_flags","setCollisionFlags","group","mask","addRigidBody","activate","a","addVehicle","vehicle_tuning","btVehicleTuning","set_m_suspensionStiffness","set_m_suspensionCompression","set_m_suspensionDamping","set_m_maxSuspensionTravelCm","set_m_maxSuspensionForce","btRaycastVehicle","rigidBody","btDefaultVehicleRaycaster","setCoordinateSystem","removeVehicle","addWheel","setSteering","details","setSteeringValue","setBrake","applyEngineForce","removeObject","removeSoftBody","removeRigidBody","_motion_states","_compound_shapes","_noncached_shapes","updateTransform","getMotionState","getWorldTransform","setWorldTransform","transform","updateMass","setMassProps","applyCentralImpulse","applyImpulse","impulse_x","impulse_y","impulse_z","applyTorque","torque_x","torque_y","torque_z","applyCentralForce","applyForce","onSimulationResume","setAngularVelocity","setLinearVelocity","setAngularFactor","setLinearFactor","setDamping","setCcdMotionThreshold","threshold","setCcdSweptSphereRadius","btPoint2PointConstraint","btHingeConstraint","transformb","transforma","getRotation","setEuler","btSliderConstraint","ta","tb","setEulerZYX","btConeTwistConstraint","setLimit","PI","btGeneric6DofConstraint","b","enableFeedback","removeConstraint","constraint_setBreakingImpulseThreshold","setBreakingImpulseThreshold","ceil","stepSimulation","reportVehicles","reportConstraints","reportWorld_softbodies","hinge_setLimits","hinge_enableAngularMotor","enableAngularMotor","hinge_disableMotor","enableMotor","slider_setLimits","setLowerLinLimit","setUpperLinLimit","setLowerAngLimit","setUpperAngLimit","slider_setRestitution","setSoftnessLimLin","setSoftnessLimAng","slider_enableLinearMotor","setTargetLinMotorVelocity","setMaxLinMotorForce","setPoweredLinMotor","slider_disableLinearMotor","slider_enableAngularMotor","setTargetAngMotorVelocity","setMaxAngMotorForce","setPoweredAngMotor","slider_disableAngularMotor","conetwist_setLimit","conetwist_enableMotor","conetwist_setMaxMotorImpulse","setMaxMotorImpulse","conetwist_setMotorTarget","setMotorTarget","conetwist_disableMotor","dof_setLinearLowerLimit","setLinearLowerLimit","dof_setLinearUpperLimit","setLinearUpperLimit","dof_setAngularLowerLimit","setAngularLowerLimit","dof_setAngularUpperLimit","setAngularUpperLimit","dof_enableAngularMotor","motor","getRotationalLimitMotor","set_m_enableMotor","dof_configureAngularMotor","set_m_loLimit","set_m_hiLimit","set_m_targetVelocity","set_m_maxMotorForce","dof_disableAngularMotor","reportWorld","worldreport","getCenterOfMassTransform","origin","getOrigin","getAngularVelocity","nodes","vert","get_m_n","faces","face","node1","node2","node3","vert1","vert2","vert3","normal1","normal2","normal3","reportCollisions","dp","getDispatcher","num","getNumManifolds","manifold","getManifoldByIndexInternal","num_contacts","getNumContacts","pt","getContactPoint","getBody0","getBody1","get_m_normalWorldOnB","getNumWheels","getWheelInfo","get_m_worldTransform","lenght","offset_body","getBreakingImpulseThreshold","WorldModule","PhysicsWorker","transferableMessage","reject","setup","properties","_native","vector3","scope","defineProperties","_x","_y","_z","__c_rot","onChange","euler","rot","wrapPhysicsPrototype","key","defineProperty","get","onCopy","sourcePhysics","modules","onWrap","API","factor","define","has","module","result","constructor","rigidbody","BoxModule","PhysicsModule","updateData","boundingBox","computeBoundingBox","min","CompoundModule","CapsuleModule","ConcaveModule","geometryProcessor","isBufferGeometry","vertices","vA","vB","vC","c","ConeModule","ConvexModule","_bufferGeometry","BufferGeometry","fromGeometry","CylinderModule","HeightfieldModule","Vector2","xdiv","ydiv","verts","xsize","ysize","abs","vNum","round","multiply","autoAlign","PlaneModule","SphereModule","boundingSphere","computeBoundingSphere","SoftbodyModule","idxGeometry","mergeVertices","bufferGeometry","addAttribute","BufferAttribute","copyVector3sArray","setIndex","Uint32Array","Uint16Array","copyIndicesArray","o1","o2","arrayMax","Infinity","l","ClothModule","geomParams","geom","facesLength","uvs","faceVertexUvs","normalsArray","uvsArray","faceArray","i3","widthSegments","heightSegments","idx00","idx01","idx10","idx11","RopeModule","buff","fromArray","n","v1","v2","PI_2","FirstPersonControlsSolver","camera","velocityFactor","runVelocity","player","pitchObject","Object3D","yawObject","ypos","canJump","moveBackward","moveLeft","moveRight","otherObject","v","r","contactNormal","onMouseMove","enabled","movementX","mozMovementX","getMovementX","movementY","mozMovementY","getMovementY","onKeyDown","keyCode","onKeyUp","getObject","getDirection","multiplyVector3","targetVec","inputVelocity","delta","speed","moveForward","order","applyQuaternion","FirstPersonModule","block","getElementById","controls","element","pointerlockchange","pointerLockElement","mozPointerLockElement","webkitPointerLockElement","style","display","pointerlockerror","warn","querySelector","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","requestFullscreen","mozRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","fullscreenchange","fullscreenElement","mozFullscreenElement","mozFullScreenElement","updateProcessor","updateLoop"],"mappings":"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"}